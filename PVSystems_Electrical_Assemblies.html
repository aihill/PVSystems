<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<title>PVSystems.Electrical.Assemblies</title>
<meta name="HTML-Generator" content="Dymola">
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="description" content="&quot;Electrical assemblies useful in PV and power electronics&quot;">
<style type="text/css">
*       { font-size: 100%; font-family: Arial, sans-serif; }
.modelica, .modelica * { font-size: 90%; font-family: Courier, monospace; white-space: pre; } /* For the Modelica code (in exported html). */
h4      { font-size: 100%; font-weight: bold; color: green; } 
h3      { font-size: 110%; font-weight: bold; color: green; }
h2      { font-size: 130%; font-weight: bold; color: green; }
address { font-weight: normal; }
td      { padding: 2px; border: 1px solid #808080; vertical-align: top; }
th      { padding: 2px; border: 1px solid #808080; vertical-align: top; font-weight: bold; }
table   { border: 1px solid #808080; border-collapse: collapse; }
pre, code {font-family: "Courier New", monospace;}
pre {white-space: pre; overflow-x : hidden;}
.ModelicaDescription {font-weight: bold;} /* For the description string of the class. */
.ModelicaBaseClass {} /* For the list of base-classes at the of the description. */
.ModelicaKeyword { color: blue; font-weight: normal; font-style: normal; } /* Keywords in Modelica. */
.ModelicaComment { color: #006400;  font-weight: normal; font-style: normal;} /* All three variants of comments in Modelica.  */
.ModelicaString { color: #006400;  font-weight: normal; font-style: normal;} /* String constants. */
.ModelicaClass { color: red; font-weight: normal; font-style: normal;} /* Formatting the names of referenced classes (for base-class and components). */
.ModelicaFunction { color: red; font-weight: normal; font-style: normal;} /* Formatting for called functions. */
.ModelicaTablePackageContent { } /* The table of contents for each package. */
.ModelicaTableCrossReference { } /* The optional cross-reference table. */
.ModelicaTableInputs {} /* The table of inputs for a function. */
.ModelicaTableOutputs {} /* The table of outputs for a function. */
.ModelicaTableParameters {} /* The table of parameters for a model/block. */
.ModelicaTableConnectors {} /* The table of connectors for a model/block. */
.ModelicaTableContents {} /* The table of contents for a connector. */
.ModelicaStartAttribute { font-weight: bold; } /* The formatting used for start-attribute in the table of parameters, to separate them from parameter values. */
.ModelicaParameterTab { background-color: #c0c0c0; font-weight: bold; } /* The tab-heading in the table of parameters */
.ModelicaParameterGroup { background-color: #e0e0e0; } /* The group-heading in the table of parameters */
</style>
</head>
<body>
<!--[if supportFields]><span style="mso-element:field-begin"></span>
<span style="mso-spacerun:yes"></span>XE Assemblies<![endif]-->
<!--[if supportFields]><span style="mso-element:field-end"></span><![endif]-->
<h2><a name="PVSystems.Electrical.Assemblies"></a><a href="PVSystems_Electrical.html#PVSystems.Electrical"
>PVSystems.Electrical</a>.Assemblies</h2>
<p>
<span class="ModelicaDescription">Electrical assemblies useful in PV and power electronics</span><br>
</p>
<h3>Information</h3>
<p><span class="ModelicaBaseClass">Extends from <a href="PVSystems_Icons.html#PVSystems.Icons.AssembliesPackage"
>PVSystems.Icons.AssembliesPackage</a> (Icon for packages of assemblies).</span></p>
<h3>Package Content</h3>
<table summary="Package Content" class="ModelicaTablePackageContent">
<tr>
<th>Name</th>
<th>Description</th>
</tr>
<tr>
<td><img src="PVSystems.Electrical.Assec6b8a9dcbffa5d3fragedS.png" alt="PVSystems.Electrical.Assemblies.HBridgeAveraged" width="20" height="20" align="top">&nbsp;<a href="PVSystems_Electrical_Assemblies.html#PVSystems.Electrical.Assemblies.HBridgeAveraged"
>HBridgeAveraged</a>
</td>
<td>Basic ideal H-bridge topology (averaged)</td>
</tr>
<tr>
<td><img src="PVSystems.Electrical.Assef2043f28e79b61aftchedS.png" alt="PVSystems.Electrical.Assemblies.HBridgeSwitched" width="20" height="20" align="top">&nbsp;<a href="PVSystems_Electrical_Assemblies.html#PVSystems.Electrical.Assemblies.HBridgeSwitched"
>HBridgeSwitched</a>
</td>
<td>Basic ideal H-bridge topology (switched)</td>
</tr>
<tr>
<td><img src="PVSystems.Electrical.Asseae29f0014101f7bcBoostS.png" alt="PVSystems.Electrical.Assemblies.BidirectionalBuckBoost" width="20" height="20" align="top">&nbsp;<a href="PVSystems_Electrical_Assemblies.html#PVSystems.Electrical.Assemblies.BidirectionalBuckBoost"
>BidirectionalBuckBoost</a>
</td>
<td>Bidirectional Buck Boost converter</td>
</tr>
<tr>
<td><img src="PVSystems.Electrical.Asse401803219e9dab0eBoostS.png" alt="PVSystems.Electrical.Assemblies.CPMBidirectionalBuckBoost" width="20" height="20" align="top">&nbsp;<a href="PVSystems_Electrical_Assemblies.html#PVSystems.Electrical.Assemblies.CPMBidirectionalBuckBoost"
>CPMBidirectionalBuckBoost</a>
</td>
<td>Bidirectional Buck Boost for battery USB interface</td>
</tr>
</table>
<hr>
<!--[if supportFields]><span style="mso-element:field-begin"></span>
<span style="mso-spacerun:yes"></span>XE HBridgeAveraged<![endif]-->
<!--[if supportFields]><span style="mso-element:field-end"></span><![endif]-->
<h2><img src="PVSystems.Electrical.Assec6b8a9dcbffa5d3fragedI.png" alt="PVSystems.Electrical.Assemblies.HBridgeAveraged" align="right" style="border: 1px solid" width="80" height="80">
<a name="PVSystems.Electrical.Assemblies.HBridgeAveraged"></a><a href="PVSystems_Electrical_Assemblies.html#PVSystems.Electrical.Assemblies"
>PVSystems.Electrical.Assemblies</a>.HBridgeAveraged</h2>
<p>
<span class="ModelicaDescription">Basic ideal H-bridge topology (averaged)</span>
<br>
<br><img src="PVSystems.Electrical.Assec6b8a9dcbffa5d3fragedD.png" alt="PVSystems.Electrical.Assemblies.HBridgeAveraged">
</p>
<h3>Information</h3>
<p>This model further
    composes IdealAverageCCMSwitch to form a typical H-bridge
    configuration from which a 1-phase inverter can be constructed.
    This model is based in averaged switch models.</p>
<p><span class="ModelicaBaseClass">Extends from <a href="PVSystems_Electrical_Interfaces.html#PVSystems.Electrical.Interfaces.TwoPortConverter"
>Interfaces.TwoPortConverter</a> (Common interface for power converters with two ports).</span></p>
<h3>Connectors</h3>
<table summary="Connectors" class="ModelicaTableConnectors">
<tr><th>Type</th><th>Name</th><th>Description</th></tr>
<tr><td>PositivePin</td><td>p1</td><td>Positive pin of the left port (potential p1.v &gt; n1.v for positive voltage drop v1)</td></tr>
<tr><td>NegativePin</td><td>n1</td><td>Negative pin of the left port</td></tr>
<tr><td>PositivePin</td><td>p2</td><td>Positive pin of the right port (potential p2.v &gt; n2.v for positive voltage drop v2)</td></tr>
<tr><td>NegativePin</td><td>n2</td><td>Negative pin of the right port</td></tr>
<tr><td>input <a href="Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealInput"
>RealInput</a></td><td>d</td><td>&nbsp;</td></tr>
</table>
<h3>Modelica definition</h3>
<div class="modelica"><span class="ModelicaKeyword">model</span> HBridgeAveraged <span class="ModelicaComment">&quot;Basic ideal H-bridge topology (averaged)&quot;</span>
  <span class="ModelicaKeyword">extends </span><a href="PVSystems_Electrical_Interfaces.html#PVSystems.Electrical.Interfaces.TwoPortConverter"
>Interfaces.TwoPortConverter</a>;
  <a href="Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealInput"
>Modelica.Blocks.Interfaces.RealInput</a> d;
  <a href="PVSystems_Electrical.html#PVSystems.Electrical.CCM1"
>CCM1</a> s1;
  <a href="PVSystems_Electrical.html#PVSystems.Electrical.CCM1"
>CCM1</a> s2;
<span class="ModelicaKeyword">equation </span>
  <span class="ModelicaFunction">connect</span>(s1.p1, p1);
  <span class="ModelicaFunction">connect</span>(s1.n1, p2);
  <span class="ModelicaFunction">connect</span>(s2.n1, n1);
  <span class="ModelicaFunction">connect</span>(s2.p1, n2);
  <span class="ModelicaFunction">connect</span>(s1.n2, n1);
  <span class="ModelicaFunction">connect</span>(d, s2.d);
  <span class="ModelicaFunction">connect</span>(d, s1.d);
  <span class="ModelicaFunction">connect</span>(s2.p2, p1);
  <span class="ModelicaFunction">connect</span>(s1.p2, p2);
  <span class="ModelicaFunction">connect</span>(s2.n2, n2);
<span class="ModelicaKeyword">end </span>HBridgeAveraged;
</div>
<hr>
<!--[if supportFields]><span style="mso-element:field-begin"></span>
<span style="mso-spacerun:yes"></span>XE HBridgeSwitched<![endif]-->
<!--[if supportFields]><span style="mso-element:field-end"></span><![endif]-->
<h2><img src="PVSystems.Electrical.Assef2043f28e79b61aftchedI.png" alt="PVSystems.Electrical.Assemblies.HBridgeSwitched" align="right" style="border: 1px solid" width="80" height="80">
<a name="PVSystems.Electrical.Assemblies.HBridgeSwitched"></a><a href="PVSystems_Electrical_Assemblies.html#PVSystems.Electrical.Assemblies"
>PVSystems.Electrical.Assemblies</a>.HBridgeSwitched</h2>
<p>
<span class="ModelicaDescription">Basic ideal H-bridge topology (switched)</span>
<br>
<br><img src="PVSystems.Electrical.Assef2043f28e79b61aftchedD.png" alt="PVSystems.Electrical.Assemblies.HBridgeSwitched">
</p>
<h3>Information</h3>
<p>This model further
    composes IdealTwoLevelBranch to form a typical H-bridge
    configuration from which a 1-phase inverter can be constructed.
    This model is based on discrete switch models.</p>
<p><span class="ModelicaBaseClass">Extends from <a href="PVSystems_Electrical_Interfaces.html#PVSystems.Electrical.Interfaces.TwoPortConverter"
>Interfaces.TwoPortConverter</a> (Common interface for power converters with two ports).</span></p>
<h3>Connectors</h3>
<table summary="Connectors" class="ModelicaTableConnectors">
<tr><th>Type</th><th>Name</th><th>Description</th></tr>
<tr><td>PositivePin</td><td>p1</td><td>Positive pin of the left port (potential p1.v &gt; n1.v for positive voltage drop v1)</td></tr>
<tr><td>NegativePin</td><td>n1</td><td>Negative pin of the left port</td></tr>
<tr><td>PositivePin</td><td>p2</td><td>Positive pin of the right port (potential p2.v &gt; n2.v for positive voltage drop v2)</td></tr>
<tr><td>NegativePin</td><td>n2</td><td>Negative pin of the right port</td></tr>
<tr><td>input <a href="Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.BooleanInput"
>BooleanInput</a></td><td>c1</td><td>&nbsp;</td></tr>
<tr><td>input <a href="Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.BooleanInput"
>BooleanInput</a></td><td>c2</td><td>&nbsp;</td></tr>
</table>
<h3>Modelica definition</h3>
<div class="modelica"><span class="ModelicaKeyword">model</span> HBridgeSwitched <span class="ModelicaComment">&quot;Basic ideal H-bridge topology (switched)&quot;</span>
  <span class="ModelicaKeyword">extends </span><a href="PVSystems_Electrical_Interfaces.html#PVSystems.Electrical.Interfaces.TwoPortConverter"
>Interfaces.TwoPortConverter</a>;
  <a href="Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.BooleanInput"
>Modelica.Blocks.Interfaces.BooleanInput</a> c1;
  <a href="Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.BooleanInput"
>Modelica.Blocks.Interfaces.BooleanInput</a> c2;
  <a href="PVSystems_Electrical.html#PVSystems.Electrical.IdealCBSwitch"
>IdealCBSwitch</a> idealCBSwitch;
  <a href="PVSystems_Electrical.html#PVSystems.Electrical.IdealCBSwitch"
>IdealCBSwitch</a> idealCBSwitch1;
  <a href="PVSystems_Electrical.html#PVSystems.Electrical.IdealCBSwitch"
>IdealCBSwitch</a> idealCBSwitch2;
  <a href="PVSystems_Electrical.html#PVSystems.Electrical.IdealCBSwitch"
>IdealCBSwitch</a> idealCBSwitch3;
<span class="ModelicaKeyword">equation </span>
  <span class="ModelicaFunction">connect</span>(c1, idealCBSwitch.c);
  <span class="ModelicaFunction">connect</span>(c1, idealCBSwitch3.c);
  <span class="ModelicaFunction">connect</span>(c2, idealCBSwitch2.c);
  <span class="ModelicaFunction">connect</span>(c2, idealCBSwitch1.c);
  <span class="ModelicaFunction">connect</span>(p1, idealCBSwitch2.p);
  <span class="ModelicaFunction">connect</span>(idealCBSwitch.p, idealCBSwitch2.p);
  <span class="ModelicaFunction">connect</span>(idealCBSwitch1.p, idealCBSwitch.n);
  <span class="ModelicaFunction">connect</span>(idealCBSwitch2.n, idealCBSwitch3.p);
  <span class="ModelicaFunction">connect</span>(n1, idealCBSwitch1.n);
  <span class="ModelicaFunction">connect</span>(idealCBSwitch3.n, idealCBSwitch1.n);
  <span class="ModelicaFunction">connect</span>(n2, idealCBSwitch3.p);
  <span class="ModelicaFunction">connect</span>(p2, idealCBSwitch.n);
<span class="ModelicaKeyword">end </span>HBridgeSwitched;
</div>
<hr>
<!--[if supportFields]><span style="mso-element:field-begin"></span>
<span style="mso-spacerun:yes"></span>XE BidirectionalBuckBoost<![endif]-->
<!--[if supportFields]><span style="mso-element:field-end"></span><![endif]-->
<h2><img src="PVSystems.Electrical.Asseae29f0014101f7bcBoostI.png" alt="PVSystems.Electrical.Assemblies.BidirectionalBuckBoost" align="right" style="border: 1px solid" width="80" height="80">
<a name="PVSystems.Electrical.Assemblies.BidirectionalBuckBoost"></a><a href="PVSystems_Electrical_Assemblies.html#PVSystems.Electrical.Assemblies"
>PVSystems.Electrical.Assemblies</a>.BidirectionalBuckBoost</h2>
<p>
<span class="ModelicaDescription">Bidirectional Buck Boost converter</span>
<br>
<br><img src="PVSystems.Electrical.Asseae29f0014101f7bcBoostD.png" alt="PVSystems.Electrical.Assemblies.BidirectionalBuckBoost">
</p>
<h3>Information</h3>
<p>Bidirectional buck boost converter</p>
<p><span class="ModelicaBaseClass">Extends from <a href="PVSystems_Electrical_Interfaces.html#PVSystems.Electrical.Interfaces.TwoPortConverter"
>Interfaces.TwoPortConverter</a> (Common interface for power converters with two ports).</span></p>
<h3>Parameters</h3>
<table summary="Parameters" class="ModelicaTableParameters">
<tr><th>Type</th><th>Name</th><th>Default</th><th>Description</th></tr>
<tr class="ModelicaParameterGroup"><td colspan="4">Power stage</td></tr>
<tr><td><a href="Modelica_SIunits.html#Modelica.SIunits.Capacitance"
>Capacitance</a></td><td>Cin</td><td>&nbsp;</td><td>Input capacitance [F]</td></tr>
<tr><td><a href="Modelica_SIunits.html#Modelica.SIunits.Resistance"
>Resistance</a></td><td>Rcin</td><td>&nbsp;</td><td>Series resistance of input capacitor [Ohm]</td></tr>
<tr><td><a href="Modelica_SIunits.html#Modelica.SIunits.Capacitance"
>Capacitance</a></td><td>Cout</td><td>&nbsp;</td><td>Output capacitance [F]</td></tr>
<tr><td><a href="Modelica_SIunits.html#Modelica.SIunits.Resistance"
>Resistance</a></td><td>Rcout</td><td>&nbsp;</td><td>Series resistance of output capacitor [Ohm]</td></tr>
<tr><td><a href="Modelica_SIunits.html#Modelica.SIunits.Inductance"
>Inductance</a></td><td>L</td><td>&nbsp;</td><td>Inductance [H]</td></tr>
<tr><td><a href="Modelica_SIunits.html#Modelica.SIunits.Resistance"
>Resistance</a></td><td>RL</td><td>&nbsp;</td><td>Series resistance of inductor [Ohm]</td></tr>
<tr class="ModelicaParameterGroup"><td colspan="4">Initialization</td></tr>
<tr><td><a href="Modelica_SIunits.html#Modelica.SIunits.Voltage"
>Voltage</a></td><td>vCin_ini</td><td>0</td><td>Guess for initial voltage of Cin [V]</td></tr>
<tr><td><a href="Modelica_SIunits.html#Modelica.SIunits.Voltage"
>Voltage</a></td><td>vCout_ini</td><td>0</td><td>Guess for initial voltage of Cout [V]</td></tr>
<tr><td><a href="Modelica_SIunits.html#Modelica.SIunits.Current"
>Current</a></td><td>iL_ini</td><td>0</td><td>Guess for initial current of L [A]</td></tr>
<tr class="ModelicaParameterGroup"><td colspan="4">Switches</td></tr>
<tr><td>Real</td><td>dmax</td><td>1</td><td>Maximum duty cycle [1]</td></tr>
<tr><td>Real</td><td>dmin</td><td>1e-3</td><td>Minimum duty cycle [1]</td></tr>
</table>
<h3>Connectors</h3>
<table summary="Connectors" class="ModelicaTableConnectors">
<tr><th>Type</th><th>Name</th><th>Description</th></tr>
<tr><td>PositivePin</td><td>p1</td><td>Positive pin of the left port (potential p1.v &gt; n1.v for positive voltage drop v1)</td></tr>
<tr><td>NegativePin</td><td>n1</td><td>Negative pin of the left port</td></tr>
<tr><td>PositivePin</td><td>p2</td><td>Positive pin of the right port (potential p2.v &gt; n2.v for positive voltage drop v2)</td></tr>
<tr><td>NegativePin</td><td>n2</td><td>Negative pin of the right port</td></tr>
<tr><td>input <a href="Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealInput"
>RealInput</a></td><td>dbuck</td><td>Buck control voltage</td></tr>
<tr><td>input <a href="Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealInput"
>RealInput</a></td><td>dboost</td><td>Boost control voltage</td></tr>
</table>
<h3>Modelica definition</h3>
<div class="modelica"><span class="ModelicaKeyword">model</span> BidirectionalBuckBoost <span class="ModelicaComment">&quot;Bidirectional Buck Boost converter&quot;</span>
  <span class="ModelicaKeyword">extends </span><a href="PVSystems_Electrical_Interfaces.html#PVSystems.Electrical.Interfaces.TwoPortConverter"
>Interfaces.TwoPortConverter</a>;
  <span class="ModelicaKeyword">parameter </span><a href="Modelica_SIunits.html#Modelica.SIunits.Capacitance"
>Modelica.SIunits.Capacitance</a> Cin <span class="ModelicaComment">&quot;Input capacitance&quot;</span>;
  <span class="ModelicaKeyword">parameter </span><a href="Modelica_SIunits.html#Modelica.SIunits.Resistance"
>Modelica.SIunits.Resistance</a> Rcin
    <span class="ModelicaComment">&quot;Series resistance of input capacitor&quot;</span>;
  <span class="ModelicaKeyword">parameter </span><a href="Modelica_SIunits.html#Modelica.SIunits.Capacitance"
>Modelica.SIunits.Capacitance</a> Cout <span class="ModelicaComment">&quot;Output capacitance&quot;</span>;
  <span class="ModelicaKeyword">parameter </span><a href="Modelica_SIunits.html#Modelica.SIunits.Resistance"
>Modelica.SIunits.Resistance</a> Rcout
    <span class="ModelicaComment">&quot;Series resistance of output capacitor&quot;</span>;
  <span class="ModelicaKeyword">parameter </span><a href="Modelica_SIunits.html#Modelica.SIunits.Inductance"
>Modelica.SIunits.Inductance</a> L <span class="ModelicaComment">&quot;Inductance&quot;</span>;
  <span class="ModelicaKeyword">parameter </span><a href="Modelica_SIunits.html#Modelica.SIunits.Resistance"
>Modelica.SIunits.Resistance</a> RL <span class="ModelicaComment">&quot;Series resistance of inductor&quot;</span>;
  <span class="ModelicaKeyword">parameter </span><a href="Modelica_SIunits.html#Modelica.SIunits.Voltage"
>Modelica.SIunits.Voltage</a> vCin_ini=0
    <span class="ModelicaComment">&quot;Guess for initial voltage of Cin&quot;</span>;
  <span class="ModelicaKeyword">parameter </span><a href="Modelica_SIunits.html#Modelica.SIunits.Voltage"
>Modelica.SIunits.Voltage</a> vCout_ini=0
    <span class="ModelicaComment">&quot;Guess for initial voltage of Cout&quot;</span>;
  <span class="ModelicaKeyword">parameter </span><a href="Modelica_SIunits.html#Modelica.SIunits.Current"
>Modelica.SIunits.Current</a> iL_ini=0 <span class="ModelicaComment">&quot;Guess for initial current of L&quot;</span>;
  <span class="ModelicaKeyword">parameter </span>Real dmax(<span class="ModelicaKeyword">final </span>unit=&quot;1&quot;) = 1 <span class="ModelicaComment">&quot;Maximum duty cycle&quot;</span>;
  <span class="ModelicaKeyword">parameter </span>Real dmin(<span class="ModelicaKeyword">final </span>unit=&quot;1&quot;) = 1e-3 <span class="ModelicaComment">&quot;Minimum duty cycle&quot;</span>;
  <a href="Modelica_Electrical_Analog_Basic.html#Modelica.Electrical.Analog.Basic.Capacitor"
>Modelica.Electrical.Analog.Basic.Capacitor</a> outCap(C=Cout, v(start=vCout_ini));
  <a href="Modelica_Electrical_Analog_Basic.html#Modelica.Electrical.Analog.Basic.Capacitor"
>Modelica.Electrical.Analog.Basic.Capacitor</a> inCap(C=Cin, v(start=vCin_ini));
  <a href="Modelica_Electrical_Analog_Basic.html#Modelica.Electrical.Analog.Basic.Inductor"
>Modelica.Electrical.Analog.Basic.Inductor</a> inductor(L=L, i(start=iL_ini));
  <a href="PVSystems_Electrical.html#PVSystems.Electrical.CCM1"
>Electrical.CCM1</a> buckSw(dmin=dmin, dmax=dmax);
  <a href="PVSystems_Electrical.html#PVSystems.Electrical.CCM1"
>Electrical.CCM1</a> boostSw(dmin=dmin, dmax=dmax);
  <a href="Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealInput"
>Modelica.Blocks.Interfaces.RealInput</a> dbuck <span class="ModelicaComment">&quot;Buck control voltage&quot;</span>;
  <a href="Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealInput"
>Modelica.Blocks.Interfaces.RealInput</a> dboost <span class="ModelicaComment">&quot;Boost control voltage&quot;</span>;
  <a href="Modelica_Electrical_Analog_Basic.html#Modelica.Electrical.Analog.Basic.Resistor"
>Modelica.Electrical.Analog.Basic.Resistor</a> resistor(R=RL);
  <a href="Modelica_Electrical_Analog_Basic.html#Modelica.Electrical.Analog.Basic.Resistor"
>Modelica.Electrical.Analog.Basic.Resistor</a> inESR(R=Rcin);
  <a href="Modelica_Electrical_Analog_Basic.html#Modelica.Electrical.Analog.Basic.Resistor"
>Modelica.Electrical.Analog.Basic.Resistor</a> outESR(R=Rcout);
<span class="ModelicaKeyword">equation </span>
  <span class="ModelicaFunction">connect</span>(buckSw.n1, inductor.p);
  <span class="ModelicaFunction">connect</span>(buckSw.p2, inductor.p);
  <span class="ModelicaFunction">connect</span>(boostSw.n1, buckSw.n2);
  <span class="ModelicaFunction">connect</span>(boostSw.n2, boostSw.p1);
  <span class="ModelicaFunction">connect</span>(p1, buckSw.p1);
  <span class="ModelicaFunction">connect</span>(outCap.p, boostSw.p2);
  <span class="ModelicaFunction">connect</span>(inCap.p, buckSw.p1);
  <span class="ModelicaFunction">connect</span>(resistor.n, boostSw.p1);
  <span class="ModelicaFunction">connect</span>(inductor.n, resistor.p);
  <span class="ModelicaFunction">connect</span>(p2, boostSw.p2);
  <span class="ModelicaFunction">connect</span>(inCap.n, inESR.p);
  <span class="ModelicaFunction">connect</span>(outCap.n, outESR.p);
  <span class="ModelicaFunction">connect</span>(outESR.n, n2);
  <span class="ModelicaFunction">connect</span>(inESR.n, n1);
  <span class="ModelicaFunction">connect</span>(inESR.n, buckSw.n2);
  <span class="ModelicaFunction">connect</span>(outESR.n, buckSw.n2);
  <span class="ModelicaFunction">connect</span>(dbuck, buckSw.d);
  <span class="ModelicaFunction">connect</span>(dboost, boostSw.d);
<span class="ModelicaKeyword">end </span>BidirectionalBuckBoost;
</div>
<hr>
<!--[if supportFields]><span style="mso-element:field-begin"></span>
<span style="mso-spacerun:yes"></span>XE CPMBidirectionalBuckBoost<![endif]-->
<!--[if supportFields]><span style="mso-element:field-end"></span><![endif]-->
<h2><img src="PVSystems.Electrical.Asse401803219e9dab0eBoostI.png" alt="PVSystems.Electrical.Assemblies.CPMBidirectionalBuckBoost" align="right" style="border: 1px solid" width="80" height="80">
<a name="PVSystems.Electrical.Assemblies.CPMBidirectionalBuckBoost"></a><a href="PVSystems_Electrical_Assemblies.html#PVSystems.Electrical.Assemblies"
>PVSystems.Electrical.Assemblies</a>.CPMBidirectionalBuckBoost</h2>
<p>
<span class="ModelicaDescription">Bidirectional Buck Boost for battery USB interface</span>
<br>
<br><img src="PVSystems.Electrical.Asse401803219e9dab0eBoostD.png" alt="PVSystems.Electrical.Assemblies.CPMBidirectionalBuckBoost">
</p>
<h3>Information</h3>
<p>Bidirectional buck boost converter</p>
<p><span class="ModelicaBaseClass">Extends from <a href="PVSystems_Electrical_Interfaces.html#PVSystems.Electrical.Interfaces.TwoPortConverter"
>Interfaces.TwoPortConverter</a> (Common interface for power converters with two ports).</span></p>
<h3>Parameters</h3>
<table summary="Parameters" class="ModelicaTableParameters">
<tr><th>Type</th><th>Name</th><th>Default</th><th>Description</th></tr>
<tr class="ModelicaParameterGroup"><td colspan="4">Power stage</td></tr>
<tr><td><a href="Modelica_SIunits.html#Modelica.SIunits.Capacitance"
>Capacitance</a></td><td>Cin</td><td>&nbsp;</td><td>Input capacitance [F]</td></tr>
<tr><td><a href="Modelica_SIunits.html#Modelica.SIunits.Capacitance"
>Capacitance</a></td><td>Cout</td><td>&nbsp;</td><td>Output capacitance [F]</td></tr>
<tr><td><a href="Modelica_SIunits.html#Modelica.SIunits.Inductance"
>Inductance</a></td><td>L</td><td>&nbsp;</td><td>Inductance [H]</td></tr>
<tr><td><a href="Modelica_SIunits.html#Modelica.SIunits.Resistance"
>Resistance</a></td><td>RL</td><td>&nbsp;</td><td>Series resistance of inductor [Ohm]</td></tr>
<tr class="ModelicaParameterGroup"><td colspan="4">Initialization</td></tr>
<tr><td><a href="Modelica_SIunits.html#Modelica.SIunits.Voltage"
>Voltage</a></td><td>vCin_ini</td><td>0</td><td>Guess for initial voltage of Cin [V]</td></tr>
<tr><td><a href="Modelica_SIunits.html#Modelica.SIunits.Voltage"
>Voltage</a></td><td>vCout_ini</td><td>0</td><td>Guess for initial voltage of Cout [V]</td></tr>
<tr><td><a href="Modelica_SIunits.html#Modelica.SIunits.Current"
>Current</a></td><td>iL_ini</td><td>0</td><td>Guess for initial current of L [A]</td></tr>
<tr class="ModelicaParameterGroup"><td colspan="4">CPM modulator</td></tr>
<tr><td><a href="Modelica_SIunits.html#Modelica.SIunits.Resistance"
>Resistance</a></td><td>Rf</td><td>&nbsp;</td><td>Equivalent sensing resistance [Ohm]</td></tr>
<tr><td><a href="Modelica_SIunits.html#Modelica.SIunits.Frequency"
>Frequency</a></td><td>fs</td><td>&nbsp;</td><td>Switching frequency [Hz]</td></tr>
<tr><td><a href="Modelica_SIunits.html#Modelica.SIunits.Voltage"
>Voltage</a></td><td>Va_buck</td><td>&nbsp;</td><td>Articial ramp amplitude for buck CPM [V]</td></tr>
<tr><td><a href="Modelica_SIunits.html#Modelica.SIunits.Voltage"
>Voltage</a></td><td>Va_boost</td><td>&nbsp;</td><td>Articial ramp amplitude for boost CPM [V]</td></tr>
</table>
<h3>Connectors</h3>
<table summary="Connectors" class="ModelicaTableConnectors">
<tr><th>Type</th><th>Name</th><th>Description</th></tr>
<tr><td>PositivePin</td><td>p1</td><td>Positive pin of the left port (potential p1.v &gt; n1.v for positive voltage drop v1)</td></tr>
<tr><td>NegativePin</td><td>n1</td><td>Negative pin of the left port</td></tr>
<tr><td>PositivePin</td><td>p2</td><td>Positive pin of the right port (potential p2.v &gt; n2.v for positive voltage drop v2)</td></tr>
<tr><td>NegativePin</td><td>n2</td><td>Negative pin of the right port</td></tr>
<tr><td>input <a href="Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealInput"
>RealInput</a></td><td>vc</td><td>Buck control voltage</td></tr>
<tr><td>input <a href="Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.BooleanInput"
>BooleanInput</a></td><td>mode</td><td>Boost control voltage</td></tr>
</table>
<h3>Modelica definition</h3>
<div class="modelica"><span class="ModelicaKeyword">model</span> CPMBidirectionalBuckBoost
  <span class="ModelicaComment">&quot;Bidirectional Buck Boost for battery USB interface&quot;</span>
  <span class="ModelicaKeyword">extends </span><a href="PVSystems_Electrical_Interfaces.html#PVSystems.Electrical.Interfaces.TwoPortConverter"
>Interfaces.TwoPortConverter</a>;
  <span class="ModelicaKeyword">parameter </span><a href="Modelica_SIunits.html#Modelica.SIunits.Capacitance"
>Modelica.SIunits.Capacitance</a> Cin <span class="ModelicaComment">&quot;Input capacitance&quot;</span>;
  <span class="ModelicaKeyword">parameter </span><a href="Modelica_SIunits.html#Modelica.SIunits.Voltage"
>Modelica.SIunits.Voltage</a> vCin_ini=0
    <span class="ModelicaComment">&quot;Guess for initial voltage of Cin&quot;</span>;
  <span class="ModelicaKeyword">parameter </span><a href="Modelica_SIunits.html#Modelica.SIunits.Capacitance"
>Modelica.SIunits.Capacitance</a> Cout <span class="ModelicaComment">&quot;Output capacitance&quot;</span>;
  <span class="ModelicaKeyword">parameter </span><a href="Modelica_SIunits.html#Modelica.SIunits.Voltage"
>Modelica.SIunits.Voltage</a> vCout_ini=0
    <span class="ModelicaComment">&quot;Guess for initial voltage of Cout&quot;</span>;
  <span class="ModelicaKeyword">parameter </span><a href="Modelica_SIunits.html#Modelica.SIunits.Inductance"
>Modelica.SIunits.Inductance</a> L <span class="ModelicaComment">&quot;Inductance&quot;</span>;
  <span class="ModelicaKeyword">parameter </span><a href="Modelica_SIunits.html#Modelica.SIunits.Current"
>Modelica.SIunits.Current</a> iL_ini=0 <span class="ModelicaComment">&quot;Guess for initial current of L&quot;</span>;
  <span class="ModelicaKeyword">parameter </span><a href="Modelica_SIunits.html#Modelica.SIunits.Resistance"
>Modelica.SIunits.Resistance</a> RL <span class="ModelicaComment">&quot;Series resistance of inductor&quot;</span>;
  <span class="ModelicaKeyword">parameter </span><a href="Modelica_SIunits.html#Modelica.SIunits.Resistance"
>Modelica.SIunits.Resistance</a> Rf <span class="ModelicaComment">&quot;Equivalent sensing resistance&quot;</span>;
  <span class="ModelicaKeyword">parameter </span><a href="Modelica_SIunits.html#Modelica.SIunits.Frequency"
>Modelica.SIunits.Frequency</a> fs <span class="ModelicaComment">&quot;Switching frequency&quot;</span>;
  <span class="ModelicaKeyword">parameter </span><a href="Modelica_SIunits.html#Modelica.SIunits.Voltage"
>Modelica.SIunits.Voltage</a> Va_buck
    <span class="ModelicaComment">&quot;Articial ramp amplitude for buck CPM&quot;</span>;
  <span class="ModelicaKeyword">parameter </span><a href="Modelica_SIunits.html#Modelica.SIunits.Voltage"
>Modelica.SIunits.Voltage</a> Va_boost
    <span class="ModelicaComment">&quot;Articial ramp amplitude for boost CPM&quot;</span>;
  <a href="PVSystems_Control.html#PVSystems.Control.CPM_CCM"
>Control.CPM_CCM</a> buck_cpm(
    L=L,
    Rf=1,
    fs=fs,
    Va=Va_buck,
    d_disabled=1);
  <a href="PVSystems_Control.html#PVSystems.Control.CPM_CCM"
>Control.CPM_CCM</a> boost_cpm(
    L=L,
    Rf=1,
    fs=fs,
    Va=Va_boost,
    d_disabled=0);
  <a href="Modelica_Blocks_Sources.html#Modelica.Blocks.Sources.RealExpression"
>Modelica.Blocks.Sources.RealExpression</a> vsense(y=Rf*conv.inductor.i);
  <a href="Modelica_Blocks_Sources.html#Modelica.Blocks.Sources.RealExpression"
>Modelica.Blocks.Sources.RealExpression</a> vm1_buck(y=v1 - v2);
  <a href="Modelica_Blocks_Sources.html#Modelica.Blocks.Sources.RealExpression"
>Modelica.Blocks.Sources.RealExpression</a> vm2_buck(y=-v2);
  <a href="Modelica_Blocks_Sources.html#Modelica.Blocks.Sources.RealExpression"
>Modelica.Blocks.Sources.RealExpression</a> vm1_boost(y=v1);
  <a href="Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealInput"
>Modelica.Blocks.Interfaces.RealInput</a> vc <span class="ModelicaComment">&quot;Buck control voltage&quot;</span>;
  <a href="Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.BooleanInput"
>Modelica.Blocks.Interfaces.BooleanInput</a> mode <span class="ModelicaComment">&quot;Boost control voltage&quot;</span>;
  <a href="PVSystems_Electrical_Assemblies.html#PVSystems.Electrical.Assemblies.BidirectionalBuckBoost"
>BidirectionalBuckBoost</a> conv(
    Cin=Cin,
    Cout=Cout,
    L=L,
    RL=RL,
    vCin_ini=vCin_ini,
    vCout_ini=vCout_ini,
    iL_ini=iL_ini,
    Rcin=1e-3,
    Rcout=1e-3,
    dmax=1,
    dmin=1e-3);
  <a href="Modelica_Blocks_Logical.html#Modelica.Blocks.Logical.Not"
>Modelica.Blocks.Logical.Not</a> not1;
<span class="ModelicaKeyword">equation </span>
  <span class="ModelicaFunction">connect</span>(conv.p1, p1);
  <span class="ModelicaFunction">connect</span>(conv.p2, p2);
  <span class="ModelicaFunction">connect</span>(conv.n2, n2);
  <span class="ModelicaFunction">connect</span>(conv.n1, n1);
  <span class="ModelicaFunction">connect</span>(vm2_buck.y, buck_cpm.vm2);
  <span class="ModelicaFunction">connect</span>(vsense.y, boost_cpm.vs);
  <span class="ModelicaFunction">connect</span>(vm1_buck.y, boost_cpm.vm2);
  <span class="ModelicaFunction">connect</span>(vm1_boost.y, boost_cpm.vm1);
  <span class="ModelicaFunction">connect</span>(vm1_buck.y, buck_cpm.vm1);
  <span class="ModelicaFunction">connect</span>(vsense.y, buck_cpm.vs);
  <span class="ModelicaFunction">connect</span>(vc, buck_cpm.vc);
  <span class="ModelicaFunction">connect</span>(vc, boost_cpm.vc);
  <span class="ModelicaFunction">connect</span>(mode, not1.u);
  <span class="ModelicaFunction">connect</span>(mode, boost_cpm.enable);
  <span class="ModelicaFunction">connect</span>(not1.y, buck_cpm.enable);
  <span class="ModelicaFunction">connect</span>(boost_cpm.d, conv.dboost);
  <span class="ModelicaFunction">connect</span>(buck_cpm.d, conv.dbuck);
<span class="ModelicaKeyword">end </span>CPMBidirectionalBuckBoost;
</div>
<hr>
<address>
<a href="http://www.3ds.com/">Automatically generated</a> Wed Apr 19 20:36:11 2017.
</address>
</body>
</html>
