<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<title>PVSystems.Electrical</title>
<meta name="HTML-Generator" content="Dymola">
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="description" content="&quot;Library for electrical models&quot;">
<style type="text/css">
*       { font-size: 100%; font-family: Arial, sans-serif; }
.modelica, .modelica * { font-size: 90%; font-family: Courier, monospace; white-space: pre; } /* For the Modelica code (in exported html). */
h4      { font-size: 100%; font-weight: bold; color: green; } 
h3      { font-size: 110%; font-weight: bold; color: green; }
h2      { font-size: 130%; font-weight: bold; color: green; }
address { font-weight: normal; }
td      { padding: 2px; border: 1px solid #808080; vertical-align: top; }
th      { padding: 2px; border: 1px solid #808080; vertical-align: top; font-weight: bold; }
table   { border: 1px solid #808080; border-collapse: collapse; }
pre, code {font-family: "Courier New", monospace;}
pre {white-space: pre; overflow-x : hidden;}
.ModelicaDescription {font-weight: bold;} /* For the description string of the class. */
.ModelicaBaseClass {} /* For the list of base-classes at the of the description. */
.ModelicaKeyword { color: blue; font-weight: normal; font-style: normal; } /* Keywords in Modelica. */
.ModelicaComment { color: #006400;  font-weight: normal; font-style: normal;} /* All three variants of comments in Modelica.  */
.ModelicaString { color: #006400;  font-weight: normal; font-style: normal;} /* String constants. */
.ModelicaClass { color: red; font-weight: normal; font-style: normal;} /* Formatting the names of referenced classes (for base-class and components). */
.ModelicaFunction { color: red; font-weight: normal; font-style: normal;} /* Formatting for called functions. */
.ModelicaTablePackageContent { } /* The table of contents for each package. */
.ModelicaTableCrossReference { } /* The optional cross-reference table. */
.ModelicaTableInputs {} /* The table of inputs for a function. */
.ModelicaTableOutputs {} /* The table of outputs for a function. */
.ModelicaTableParameters {} /* The table of parameters for a model/block. */
.ModelicaTableConnectors {} /* The table of connectors for a model/block. */
.ModelicaTableContents {} /* The table of contents for a connector. */
.ModelicaStartAttribute { font-weight: bold; } /* The formatting used for start-attribute in the table of parameters, to separate them from parameter values. */
.ModelicaParameterTab { background-color: #c0c0c0; font-weight: bold; } /* The tab-heading in the table of parameters */
.ModelicaParameterGroup { background-color: #e0e0e0; } /* The group-heading in the table of parameters */
</style>
</head>
<body>
<!--[if supportFields]><span style="mso-element:field-begin"></span>
<span style="mso-spacerun:yes"></span>XE Electrical<![endif]-->
<!--[if supportFields]><span style="mso-element:field-end"></span><![endif]-->
<h2><a name="PVSystems.Electrical"></a><a href="index.html#PVSystems"
>PVSystems</a>.Electrical</h2>
<p>
<span class="ModelicaDescription">Library for electrical models</span><br>
</p>
<h3>Information</h3>
<p><span class="ModelicaBaseClass">Extends from Modelica.Icons.Package (Icon for standard packages).</span></p>
<h3>Package Content</h3>
<table summary="Package Content" class="ModelicaTablePackageContent">
<tr>
<th>Name</th>
<th>Description</th>
</tr>
<tr>
<td><img src="PVSystems.Electrical.IdealCBSwitchS.png" alt="PVSystems.Electrical.IdealCBSwitch" width="20" height="20" align="top">&nbsp;<a href="PVSystems_Electrical.html#PVSystems.Electrical.IdealCBSwitch"
>IdealCBSwitch</a>
</td>
<td>Basic two-cuadrant current bidirectional switch</td>
</tr>
<tr>
<td><img src="PVSystems.Electrical.SW1S.png" alt="PVSystems.Electrical.SW1" width="20" height="20" align="top">&nbsp;<a href="PVSystems_Electrical.html#PVSystems.Electrical.SW1"
>SW1</a>
</td>
<td>Switched model implemented with switch + diode</td>
</tr>
<tr>
<td><img src="PVSystems.Electrical.SW1S.png" alt="PVSystems.Electrical.SW2" width="20" height="20" align="top">&nbsp;<a href="PVSystems_Electrical.html#PVSystems.Electrical.SW2"
>SW2</a>
</td>
<td>Switched model implemented with switch x 2</td>
</tr>
<tr>
<td><img src="PVSystems.Electrical.SW1S.png" alt="PVSystems.Electrical.SW3" width="20" height="20" align="top">&nbsp;<a href="PVSystems_Electrical.html#PVSystems.Electrical.SW3"
>SW3</a>
</td>
<td>Switched model implemented with switch + anti-parallel diode x 2</td>
</tr>
<tr>
<td><img src="PVSystems.Electrical.SW1S.png" alt="PVSystems.Electrical.CCM1" width="20" height="20" align="top">&nbsp;<a href="PVSystems_Electrical.html#PVSystems.Electrical.CCM1"
>CCM1</a>
</td>
<td>Average CCM model with no losses</td>
</tr>
<tr>
<td><img src="PVSystems.Electrical.SW1S.png" alt="PVSystems.Electrical.CCM2" width="20" height="20" align="top">&nbsp;<a href="PVSystems_Electrical.html#PVSystems.Electrical.CCM2"
>CCM2</a>
</td>
<td>Average CCM model with conduction losses</td>
</tr>
<tr>
<td><img src="PVSystems.Electrical.SW1S.png" alt="PVSystems.Electrical.CCM3" width="20" height="20" align="top">&nbsp;<a href="PVSystems_Electrical.html#PVSystems.Electrical.CCM3"
>CCM3</a>
</td>
<td>Average CCM model with no losses and tranformer</td>
</tr>
<tr>
<td><img src="PVSystems.Electrical.SW1S.png" alt="PVSystems.Electrical.CCM4" width="20" height="20" align="top">&nbsp;<a href="PVSystems_Electrical.html#PVSystems.Electrical.CCM4"
>CCM4</a>
</td>
<td>Average CCM model with conduction losses and tranformer</td>
</tr>
<tr>
<td><img src="PVSystems.Electrical.SW1S.png" alt="PVSystems.Electrical.CCM5" width="20" height="20" align="top">&nbsp;<a href="PVSystems_Electrical.html#PVSystems.Electrical.CCM5"
>CCM5</a>
</td>
<td>Average CCM model with conduction losses and diode reverse recovery</td>
</tr>
<tr>
<td><img src="PVSystems.Electrical.SW1S.png" alt="PVSystems.Electrical.CCM_DCM1" width="20" height="20" align="top">&nbsp;<a href="PVSystems_Electrical.html#PVSystems.Electrical.CCM_DCM1"
>CCM_DCM1</a>
</td>
<td>Average CCM-DCM model with no losses</td>
</tr>
<tr>
<td><img src="PVSystems.Electrical.SW1S.png" alt="PVSystems.Electrical.CCM_DCM2" width="20" height="20" align="top">&nbsp;<a href="PVSystems_Electrical.html#PVSystems.Electrical.CCM_DCM2"
>CCM_DCM2</a>
</td>
<td>Average CCM-DCM model with no losses and transformer</td>
</tr>
<tr>
<td><img src="PVSystems.Electrical.PVArrayS.png" alt="PVSystems.Electrical.PVArray" width="20" height="20" align="top">&nbsp;<a href="PVSystems_Electrical.html#PVSystems.Electrical.PVArray"
>PVArray</a>
</td>
<td>Flexible PV array model</td>
</tr>
<tr>
<td><img src="PVSystems.Electrical.SimpleBatteryS.png" alt="PVSystems.Electrical.SimpleBattery" width="20" height="20" align="top">&nbsp;<a href="PVSystems_Electrical.html#PVSystems.Electrical.SimpleBattery"
>SimpleBattery</a>
</td>
<td>Simple battery model</td>
</tr>
<tr>
<td><img src="PVSystems.Electrical.AssembliesS.png" alt="PVSystems.Electrical.Assemblies" width="20" height="20" align="top">&nbsp;<a href="PVSystems_Electrical_Assemblies.html#PVSystems.Electrical.Assemblies"
>Assemblies</a>
</td>
<td>Electrical assemblies useful in PV and power electronics</td>
</tr>
<tr>
<td><img src="PVSystems.Electrical.InterfacesS.png" alt="PVSystems.Electrical.Interfaces" width="20" height="20" align="top">&nbsp;<a href="PVSystems_Electrical_Interfaces.html#PVSystems.Electrical.Interfaces"
>Interfaces</a>
</td>
<td>Interfaces</td>
</tr>
</table>
<hr>
<!--[if supportFields]><span style="mso-element:field-begin"></span>
<span style="mso-spacerun:yes"></span>XE IdealCBSwitch<![endif]-->
<!--[if supportFields]><span style="mso-element:field-end"></span><![endif]-->
<h2><img src="PVSystems.Electrical.IdealCBSwitchI.png" alt="PVSystems.Electrical.IdealCBSwitch" align="right" style="border: 1px solid" width="80" height="80">
<a name="PVSystems.Electrical.IdealCBSwitch"></a><a href="PVSystems_Electrical.html#PVSystems.Electrical"
>PVSystems.Electrical</a>.IdealCBSwitch</h2>
<p>
<span class="ModelicaDescription">Basic two-cuadrant current bidirectional switch</span>
<br>
<br><img src="PVSystems.Electrical.IdealCBSwitchD.png" alt="PVSystems.Electrical.IdealCBSwitch">
</p>
<h3>Information</h3>

      <p>This model represents and idealized current bi-directional
      switch. This is the typical IGBT in anti-parallel with a diode from
      which many converters are built.</p>
      
<p><span class="ModelicaBaseClass">Extends from Modelica.Electrical.Analog.Interfaces.TwoPin (Component with two electrical pins).</span></p>
<h3>Connectors</h3>
<table summary="Connectors" class="ModelicaTableConnectors">
<tr><th>Type</th><th>Name</th><th>Description</th></tr>
<tr><td>PositivePin</td><td>p</td><td>Positive pin Positive pin (potential p.v &gt; n.v for positive voltage drop v)</td></tr>
<tr><td>NegativePin</td><td>n</td><td>Negative pin</td></tr>
<tr><td>input BooleanInput</td><td>c</td><td>&nbsp;</td></tr>
</table>
<h3>Filename</h3>
<pre>PVSystems_Electrical.html</pre>
<h3>Modelica definition</h3>
<div class="modelica"><span class="ModelicaKeyword">model</span> IdealCBSwitch <span class="ModelicaComment">&quot;Basic two-cuadrant current bidirectional switch&quot;</span>
  <span class="ModelicaKeyword">extends </span><a href="Modelica_Electrical_Analog_Interfaces.html#Modelica.Electrical.Analog.Interfaces.TwoPin"
>Modelica.Electrical.Analog.Interfaces.TwoPin</a>;
  <span class="ModelicaComment">// Components</span>
  <a href="Modelica_Electrical_Analog_Ideal.html#Modelica.Electrical.Analog.Ideal.IdealClosingSwitch"
>Modelica.Electrical.Analog.Ideal.IdealClosingSwitch</a> idealClosingSwitch;
  <a href="Modelica_Electrical_Analog_Ideal.html#Modelica.Electrical.Analog.Ideal.IdealDiode"
>Modelica.Electrical.Analog.Ideal.IdealDiode</a> idealDiode;
  <a href="Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.BooleanInput"
>Modelica.Blocks.Interfaces.BooleanInput</a> c;
<span class="ModelicaKeyword">equation </span>
  <span class="ModelicaFunction">connect</span>(p, idealClosingSwitch.p);
  <span class="ModelicaFunction">connect</span>(idealClosingSwitch.n, n);
  <span class="ModelicaFunction">connect</span>(idealDiode.p, n);
  <span class="ModelicaFunction">connect</span>(idealDiode.n, p);
  <span class="ModelicaFunction">connect</span>(c, idealClosingSwitch.control);
<span class="ModelicaKeyword">end </span>IdealCBSwitch;
</div>
<hr>
<!--[if supportFields]><span style="mso-element:field-begin"></span>
<span style="mso-spacerun:yes"></span>XE SW1<![endif]-->
<!--[if supportFields]><span style="mso-element:field-end"></span><![endif]-->
<h2><img src="PVSystems.Electrical.SW1I.png" alt="PVSystems.Electrical.SW1" align="right" style="border: 1px solid" width="80" height="80">
<a name="PVSystems.Electrical.SW1"></a><a href="PVSystems_Electrical.html#PVSystems.Electrical"
>PVSystems.Electrical</a>.SW1</h2>
<p>
<span class="ModelicaDescription">Switched model implemented with switch + diode</span>
<br>
<br><img src="PVSystems.Electrical.SW1D.png" alt="PVSystems.Electrical.SW1">
</p>
<h3>Information</h3>
<p><span class="ModelicaBaseClass">Extends from <a href="PVSystems_Electrical_Interfaces.html#PVSystems.Electrical.Interfaces.SwitchNetworkInterface"
>Interfaces.SwitchNetworkInterface</a> (Interface for the averaged switch network models).</span></p>
<h3>Parameters</h3>
<table summary="Parameters" class="ModelicaTableParameters">
<tr><th>Type</th><th>Name</th><th>Default</th><th>Description</th></tr>
<tr><td>Real</td><td>dmin</td><td>1e-3</td><td>Minimum duty cycle [1]</td></tr>
<tr><td>Real</td><td>dmax</td><td>1</td><td>Maximum duty cycle [1]</td></tr>
<tr><td>Real</td><td>dMax</td><td>1</td><td>Maximum duty cycle</td></tr>
<tr><td>Real</td><td>dMin</td><td>0</td><td>Minimum duty cycle</td></tr>
<tr><td>Frequency</td><td>fs</td><td>&nbsp;</td><td>Switching frequency [Hz]</td></tr>
<tr><td>Time</td><td>startTime</td><td>0</td><td>Start time [s]</td></tr>
<tr><td>Resistance</td><td>RD</td><td>1.E-5</td><td>Forward state-on differential resistance (closed resistance) [Ohm]</td></tr>
<tr><td>Voltage</td><td>VD</td><td>0</td><td>Forward threshold voltage [V]</td></tr>
<tr><td>Resistance</td><td>Ron</td><td>1.E-5</td><td>Closed switch resistance [Ohm]</td></tr>
</table>
<h3>Connectors</h3>
<table summary="Connectors" class="ModelicaTableConnectors">
<tr><th>Type</th><th>Name</th><th>Description</th></tr>
<tr><td>PositivePin</td><td>p1</td><td>Positive pin of the left port (potential p1.v &gt; n1.v for positive voltage drop v1)</td></tr>
<tr><td>NegativePin</td><td>n1</td><td>Negative pin of the left port</td></tr>
<tr><td>PositivePin</td><td>p2</td><td>Positive pin of the right port (potential p2.v &gt; n2.v for positive voltage drop v2)</td></tr>
<tr><td>NegativePin</td><td>n2</td><td>Negative pin of the right port</td></tr>
<tr><td>input RealInput</td><td>d</td><td>Duty cycle</td></tr>
</table>
<h3>Filename</h3>
<pre>PVSystems_Electrical.html</pre>
<h3>Modelica definition</h3>
<div class="modelica"><span class="ModelicaKeyword">model</span> SW1 <span class="ModelicaComment">&quot;Switched model implemented with switch + diode&quot;</span>
  <span class="ModelicaKeyword">extends </span><a href="PVSystems_Electrical_Interfaces.html#PVSystems.Electrical.Interfaces.SwitchNetworkInterface"
>Interfaces.SwitchNetworkInterface</a>;
  <a href="Modelica_Electrical_Analog_Ideal.html#Modelica.Electrical.Analog.Ideal.IdealClosingSwitch"
>Modelica.Electrical.Analog.Ideal.IdealClosingSwitch</a> sw1(Ron=Ron);
  <a href="Modelica_Electrical_Analog_Ideal.html#Modelica.Electrical.Analog.Ideal.IdealDiode"
>Modelica.Electrical.Analog.Ideal.IdealDiode</a> sw2(Ron=RD, Vknee=VD);
  <a href="PVSystems_Control.html#PVSystems.Control.SwitchingPWM"
>Control.SwitchingPWM</a> signalPWM(
    dMax=dMax,
    dMin=dMin,
    fs=fs,
    startTime=startTime);
  <span class="ModelicaKeyword">parameter </span>Real dMax=1 <span class="ModelicaComment">&quot;Maximum duty cycle&quot;</span>;
  <span class="ModelicaKeyword">parameter </span>Real dMin=0 <span class="ModelicaComment">&quot;Minimum duty cycle&quot;</span>;
  <span class="ModelicaKeyword">parameter </span><a href="Modelica_SIunits.html#Modelica.SIunits.Frequency"
>Modelica.SIunits.Frequency</a> fs <span class="ModelicaComment">&quot;Switching frequency&quot;</span>;
  <span class="ModelicaKeyword">parameter </span><a href="Modelica_SIunits.html#Modelica.SIunits.Time"
>Modelica.SIunits.Time</a> startTime=0 <span class="ModelicaComment">&quot;Start time&quot;</span>;
  <span class="ModelicaKeyword">parameter </span><a href="Modelica_SIunits.html#Modelica.SIunits.Resistance"
>Modelica.SIunits.Resistance</a> RD=1.E-5
    <span class="ModelicaComment">&quot;Forward state-on differential resistance (closed resistance)&quot;</span>;
  <span class="ModelicaKeyword">parameter </span><a href="Modelica_SIunits.html#Modelica.SIunits.Voltage"
>Modelica.SIunits.Voltage</a> VD=0 <span class="ModelicaComment">&quot;Forward threshold voltage&quot;</span>;
  <span class="ModelicaKeyword">parameter </span><a href="Modelica_SIunits.html#Modelica.SIunits.Resistance"
>Modelica.SIunits.Resistance</a> Ron=1.E-5 <span class="ModelicaComment">&quot;Closed switch resistance&quot;</span>;
<span class="ModelicaKeyword">equation </span>
  <span class="ModelicaFunction">connect</span>(p1, sw1.p);
  <span class="ModelicaFunction">connect</span>(n1, sw1.n);
  <span class="ModelicaFunction">connect</span>(sw2.n, p2);
  <span class="ModelicaFunction">connect</span>(n2, sw2.p);
  <span class="ModelicaFunction">connect</span>(signalPWM.vc, d);
  <span class="ModelicaFunction">connect</span>(signalPWM.c1, sw1.control);
<span class="ModelicaKeyword">end </span>SW1;
</div>
<hr>
<!--[if supportFields]><span style="mso-element:field-begin"></span>
<span style="mso-spacerun:yes"></span>XE SW2<![endif]-->
<!--[if supportFields]><span style="mso-element:field-end"></span><![endif]-->
<h2><img src="PVSystems.Electrical.SW1I.png" alt="PVSystems.Electrical.SW2" align="right" style="border: 1px solid" width="80" height="80">
<a name="PVSystems.Electrical.SW2"></a><a href="PVSystems_Electrical.html#PVSystems.Electrical"
>PVSystems.Electrical</a>.SW2</h2>
<p>
<span class="ModelicaDescription">Switched model implemented with switch x 2</span>
<br>
<br><img src="PVSystems.Electrical.SW2D.png" alt="PVSystems.Electrical.SW2">
</p>
<h3>Information</h3>
<p><span class="ModelicaBaseClass">Extends from <a href="PVSystems_Electrical_Interfaces.html#PVSystems.Electrical.Interfaces.SwitchNetworkInterface"
>Interfaces.SwitchNetworkInterface</a> (Interface for the averaged switch network models).</span></p>
<h3>Parameters</h3>
<table summary="Parameters" class="ModelicaTableParameters">
<tr><th>Type</th><th>Name</th><th>Default</th><th>Description</th></tr>
<tr><td>Real</td><td>dmin</td><td>1e-3</td><td>Minimum duty cycle [1]</td></tr>
<tr><td>Real</td><td>dmax</td><td>1</td><td>Maximum duty cycle [1]</td></tr>
<tr><td>Real</td><td>dMax</td><td>1</td><td>Maximum duty cycle</td></tr>
<tr><td>Real</td><td>dMin</td><td>0</td><td>Minimum duty cycle</td></tr>
<tr><td><a href="Modelica_SIunits.html#Modelica.SIunits.Frequency"
>Frequency</a></td><td>fs</td><td>&nbsp;</td><td>Switching frequency [Hz]</td></tr>
<tr><td><a href="Modelica_SIunits.html#Modelica.SIunits.Time"
>Time</a></td><td>startTime</td><td>0</td><td>Start time [s]</td></tr>
<tr><td><a href="Modelica_SIunits.html#Modelica.SIunits.Resistance"
>Resistance</a></td><td>RD</td><td>1.E-5</td><td>Forward state-on differential resistance (closed resistance) [Ohm]</td></tr>
<tr><td><a href="Modelica_SIunits.html#Modelica.SIunits.Voltage"
>Voltage</a></td><td>VD</td><td>0</td><td>Forward threshold voltage [V]</td></tr>
<tr><td><a href="Modelica_SIunits.html#Modelica.SIunits.Resistance"
>Resistance</a></td><td>Ron</td><td>1.E-5</td><td>Closed switch resistance [Ohm]</td></tr>
</table>
<h3>Connectors</h3>
<table summary="Connectors" class="ModelicaTableConnectors">
<tr><th>Type</th><th>Name</th><th>Description</th></tr>
<tr><td>PositivePin</td><td>p1</td><td>Positive pin of the left port (potential p1.v &gt; n1.v for positive voltage drop v1)</td></tr>
<tr><td>NegativePin</td><td>n1</td><td>Negative pin of the left port</td></tr>
<tr><td>PositivePin</td><td>p2</td><td>Positive pin of the right port (potential p2.v &gt; n2.v for positive voltage drop v2)</td></tr>
<tr><td>NegativePin</td><td>n2</td><td>Negative pin of the right port</td></tr>
<tr><td>input RealInput</td><td>d</td><td>Duty cycle</td></tr>
</table>
<h3>Filename</h3>
<pre>PVSystems_Electrical.html</pre>
<h3>Modelica definition</h3>
<div class="modelica"><span class="ModelicaKeyword">model</span> SW2 <span class="ModelicaComment">&quot;Switched model implemented with switch x 2&quot;</span>
  <span class="ModelicaKeyword">extends </span><a href="PVSystems_Electrical_Interfaces.html#PVSystems.Electrical.Interfaces.SwitchNetworkInterface"
>Interfaces.SwitchNetworkInterface</a>;
  <a href="Modelica_Electrical_Analog_Ideal.html#Modelica.Electrical.Analog.Ideal.IdealClosingSwitch"
>Modelica.Electrical.Analog.Ideal.IdealClosingSwitch</a> sw1(Ron=Ron);
  <a href="PVSystems_Control.html#PVSystems.Control.SwitchingPWM"
>Control.SwitchingPWM</a> signalPWM(
    dMax=dMax,
    dMin=dMin,
    fs=fs,
    startTime=startTime);
  <span class="ModelicaKeyword">parameter </span>Real dMax=1 <span class="ModelicaComment">&quot;Maximum duty cycle&quot;</span>;
  <span class="ModelicaKeyword">parameter </span>Real dMin=0 <span class="ModelicaComment">&quot;Minimum duty cycle&quot;</span>;
  <span class="ModelicaKeyword">parameter </span><a href="Modelica_SIunits.html#Modelica.SIunits.Frequency"
>Modelica.SIunits.Frequency</a> fs <span class="ModelicaComment">&quot;Switching frequency&quot;</span>;
  <span class="ModelicaKeyword">parameter </span><a href="Modelica_SIunits.html#Modelica.SIunits.Time"
>Modelica.SIunits.Time</a> startTime=0 <span class="ModelicaComment">&quot;Start time&quot;</span>;
  <span class="ModelicaKeyword">parameter </span><a href="Modelica_SIunits.html#Modelica.SIunits.Resistance"
>Modelica.SIunits.Resistance</a> RD=1.E-5
    <span class="ModelicaComment">&quot;Forward state-on differential resistance (closed resistance)&quot;</span>;
  <span class="ModelicaKeyword">parameter </span><a href="Modelica_SIunits.html#Modelica.SIunits.Voltage"
>Modelica.SIunits.Voltage</a> VD=0 <span class="ModelicaComment">&quot;Forward threshold voltage&quot;</span>;
  <span class="ModelicaKeyword">parameter </span><a href="Modelica_SIunits.html#Modelica.SIunits.Resistance"
>Modelica.SIunits.Resistance</a> Ron=1.E-5 <span class="ModelicaComment">&quot;Closed switch resistance&quot;</span>;
  <a href="Modelica_Electrical_Analog_Ideal.html#Modelica.Electrical.Analog.Ideal.IdealClosingSwitch"
>Modelica.Electrical.Analog.Ideal.IdealClosingSwitch</a> sw2(Ron=Ron);
  <a href="PVSystems_Control.html#PVSystems.Control.DeadTime"
>Control.DeadTime</a> deadTime;
<span class="ModelicaKeyword">equation </span>
  <span class="ModelicaFunction">connect</span>(p1, sw1.p);
  <span class="ModelicaFunction">connect</span>(n1, sw1.n);
  <span class="ModelicaFunction">connect</span>(signalPWM.vc, d);
  <span class="ModelicaFunction">connect</span>(deadTime.c, signalPWM.c1);
  <span class="ModelicaFunction">connect</span>(deadTime.c1, sw1.control);
  <span class="ModelicaFunction">connect</span>(sw2.n, p2);
  <span class="ModelicaFunction">connect</span>(n2, sw2.p);
  <span class="ModelicaFunction">connect</span>(deadTime.c2, sw2.control);
<span class="ModelicaKeyword">end </span>SW2;
</div>
<hr>
<!--[if supportFields]><span style="mso-element:field-begin"></span>
<span style="mso-spacerun:yes"></span>XE SW3<![endif]-->
<!--[if supportFields]><span style="mso-element:field-end"></span><![endif]-->
<h2><img src="PVSystems.Electrical.SW1I.png" alt="PVSystems.Electrical.SW3" align="right" style="border: 1px solid" width="80" height="80">
<a name="PVSystems.Electrical.SW3"></a><a href="PVSystems_Electrical.html#PVSystems.Electrical"
>PVSystems.Electrical</a>.SW3</h2>
<p>
<span class="ModelicaDescription">Switched model implemented with switch + anti-parallel diode x 2</span>
<br>
<br><img src="PVSystems.Electrical.SW3D.png" alt="PVSystems.Electrical.SW3">
</p>
<h3>Information</h3>
<p><span class="ModelicaBaseClass">Extends from <a href="PVSystems_Electrical_Interfaces.html#PVSystems.Electrical.Interfaces.SwitchNetworkInterface"
>Interfaces.SwitchNetworkInterface</a> (Interface for the averaged switch network models).</span></p>
<h3>Parameters</h3>
<table summary="Parameters" class="ModelicaTableParameters">
<tr><th>Type</th><th>Name</th><th>Default</th><th>Description</th></tr>
<tr><td>Real</td><td>dmin</td><td>1e-3</td><td>Minimum duty cycle [1]</td></tr>
<tr><td>Real</td><td>dmax</td><td>1</td><td>Maximum duty cycle [1]</td></tr>
<tr><td>Real</td><td>dMax</td><td>1</td><td>Maximum duty cycle</td></tr>
<tr><td>Real</td><td>dMin</td><td>0</td><td>Minimum duty cycle</td></tr>
<tr><td><a href="Modelica_SIunits.html#Modelica.SIunits.Frequency"
>Frequency</a></td><td>fs</td><td>&nbsp;</td><td>Switching frequency [Hz]</td></tr>
<tr><td><a href="Modelica_SIunits.html#Modelica.SIunits.Time"
>Time</a></td><td>startTime</td><td>0</td><td>Start time [s]</td></tr>
<tr><td><a href="Modelica_SIunits.html#Modelica.SIunits.Resistance"
>Resistance</a></td><td>RD</td><td>1.E-5</td><td>Forward state-on differential resistance (closed resistance) [Ohm]</td></tr>
<tr><td><a href="Modelica_SIunits.html#Modelica.SIunits.Voltage"
>Voltage</a></td><td>VD</td><td>0</td><td>Forward threshold voltage [V]</td></tr>
<tr><td><a href="Modelica_SIunits.html#Modelica.SIunits.Resistance"
>Resistance</a></td><td>Ron</td><td>1.E-5</td><td>Closed switch resistance [Ohm]</td></tr>
</table>
<h3>Connectors</h3>
<table summary="Connectors" class="ModelicaTableConnectors">
<tr><th>Type</th><th>Name</th><th>Description</th></tr>
<tr><td>PositivePin</td><td>p1</td><td>Positive pin of the left port (potential p1.v &gt; n1.v for positive voltage drop v1)</td></tr>
<tr><td>NegativePin</td><td>n1</td><td>Negative pin of the left port</td></tr>
<tr><td>PositivePin</td><td>p2</td><td>Positive pin of the right port (potential p2.v &gt; n2.v for positive voltage drop v2)</td></tr>
<tr><td>NegativePin</td><td>n2</td><td>Negative pin of the right port</td></tr>
<tr><td>input RealInput</td><td>d</td><td>Duty cycle</td></tr>
</table>
<h3>Filename</h3>
<pre>PVSystems_Electrical.html</pre>
<h3>Modelica definition</h3>
<div class="modelica"><span class="ModelicaKeyword">model</span> SW3 <span class="ModelicaComment">&quot;Switched model implemented with switch + anti-parallel diode x 2&quot;</span>
  <span class="ModelicaKeyword">extends </span><a href="PVSystems_Electrical_Interfaces.html#PVSystems.Electrical.Interfaces.SwitchNetworkInterface"
>Interfaces.SwitchNetworkInterface</a>;
  <a href="Modelica_Electrical_Analog_Ideal.html#Modelica.Electrical.Analog.Ideal.IdealClosingSwitch"
>Modelica.Electrical.Analog.Ideal.IdealClosingSwitch</a> sw1(Ron=Ron);
  <a href="PVSystems_Control.html#PVSystems.Control.SwitchingPWM"
>Control.SwitchingPWM</a> signalPWM(
    dMax=dMax,
    dMin=dMin,
    fs=fs,
    startTime=startTime);
  <span class="ModelicaKeyword">parameter </span>Real dMax=1 <span class="ModelicaComment">&quot;Maximum duty cycle&quot;</span>;
  <span class="ModelicaKeyword">parameter </span>Real dMin=0 <span class="ModelicaComment">&quot;Minimum duty cycle&quot;</span>;
  <span class="ModelicaKeyword">parameter </span><a href="Modelica_SIunits.html#Modelica.SIunits.Frequency"
>Modelica.SIunits.Frequency</a> fs <span class="ModelicaComment">&quot;Switching frequency&quot;</span>;
  <span class="ModelicaKeyword">parameter </span><a href="Modelica_SIunits.html#Modelica.SIunits.Time"
>Modelica.SIunits.Time</a> startTime=0 <span class="ModelicaComment">&quot;Start time&quot;</span>;
  <span class="ModelicaKeyword">parameter </span><a href="Modelica_SIunits.html#Modelica.SIunits.Resistance"
>Modelica.SIunits.Resistance</a> RD=1.E-5
    <span class="ModelicaComment">&quot;Forward state-on differential resistance (closed resistance)&quot;</span>;
  <span class="ModelicaKeyword">parameter </span><a href="Modelica_SIunits.html#Modelica.SIunits.Voltage"
>Modelica.SIunits.Voltage</a> VD=0 <span class="ModelicaComment">&quot;Forward threshold voltage&quot;</span>;
  <span class="ModelicaKeyword">parameter </span><a href="Modelica_SIunits.html#Modelica.SIunits.Resistance"
>Modelica.SIunits.Resistance</a> Ron=1.E-5 <span class="ModelicaComment">&quot;Closed switch resistance&quot;</span>;
  <a href="Modelica_Electrical_Analog_Ideal.html#Modelica.Electrical.Analog.Ideal.IdealClosingSwitch"
>Modelica.Electrical.Analog.Ideal.IdealClosingSwitch</a> sw2(Ron=Ron);
  <a href="PVSystems_Control.html#PVSystems.Control.DeadTime"
>Control.DeadTime</a> deadTime;
  <a href="Modelica_Electrical_Analog_Ideal.html#Modelica.Electrical.Analog.Ideal.IdealDiode"
>Modelica.Electrical.Analog.Ideal.IdealDiode</a> d1;
  <a href="Modelica_Electrical_Analog_Ideal.html#Modelica.Electrical.Analog.Ideal.IdealDiode"
>Modelica.Electrical.Analog.Ideal.IdealDiode</a> d2;
<span class="ModelicaKeyword">equation </span>
  <span class="ModelicaFunction">connect</span>(p1, sw1.p);
  <span class="ModelicaFunction">connect</span>(n1, sw1.n);
  <span class="ModelicaFunction">connect</span>(signalPWM.vc, d);
  <span class="ModelicaFunction">connect</span>(deadTime.c, signalPWM.c1);
  <span class="ModelicaFunction">connect</span>(deadTime.c1, sw1.control);
  <span class="ModelicaFunction">connect</span>(sw2.n, p2);
  <span class="ModelicaFunction">connect</span>(n2, sw2.p);
  <span class="ModelicaFunction">connect</span>(deadTime.c2, sw2.control);
  <span class="ModelicaFunction">connect</span>(d1.n, sw1.p);
  <span class="ModelicaFunction">connect</span>(d1.p, sw1.n);
  <span class="ModelicaFunction">connect</span>(d2.n, p2);
  <span class="ModelicaFunction">connect</span>(d2.p, n2);
<span class="ModelicaKeyword">end </span>SW3;
</div>
<hr>
<!--[if supportFields]><span style="mso-element:field-begin"></span>
<span style="mso-spacerun:yes"></span>XE CCM1<![endif]-->
<!--[if supportFields]><span style="mso-element:field-end"></span><![endif]-->
<h2><img src="PVSystems.Electrical.SW1I.png" alt="PVSystems.Electrical.CCM1" align="right" style="border: 1px solid" width="80" height="80">
<a name="PVSystems.Electrical.CCM1"></a><a href="PVSystems_Electrical.html#PVSystems.Electrical"
>PVSystems.Electrical</a>.CCM1</h2>
<p>
<span class="ModelicaDescription">Average CCM model with no losses</span>
<br>
<br><img src="PVSystems.Electrical.CCM1D.png" alt="PVSystems.Electrical.CCM1">
</p>
<h3>Information</h3>

      <p>
        <em>Application</em>: two-switch PWM converters.
      </p>
    
      <p>
        <em>Limitations</em>: ideal switches, CCM only, no transformer.
      </p>
    
      <p>
        Model taken
        from <a href="PVSystems_UsersGuide_References.html#PVSystems.UsersGuide.References.EM01"
>EM01</a>
        and <a href="PVSystems_UsersGuide_References.html#PVSystems.UsersGuide.References.EMA16"
>EMA16</a>.</p>
    
<p><span class="ModelicaBaseClass">Extends from <a href="PVSystems_Electrical_Interfaces.html#PVSystems.Electrical.Interfaces.SwitchNetworkInterface"
>Interfaces.SwitchNetworkInterface</a> (Interface for the averaged switch network models).</span></p>
<h3>Parameters</h3>
<table summary="Parameters" class="ModelicaTableParameters">
<tr><th>Type</th><th>Name</th><th>Default</th><th>Description</th></tr>
<tr><td>Real</td><td>dmin</td><td>1e-3</td><td>Minimum duty cycle [1]</td></tr>
<tr><td>Real</td><td>dmax</td><td>1</td><td>Maximum duty cycle [1]</td></tr>
</table>
<h3>Connectors</h3>
<table summary="Connectors" class="ModelicaTableConnectors">
<tr><th>Type</th><th>Name</th><th>Description</th></tr>
<tr><td>PositivePin</td><td>p1</td><td>Positive pin of the left port (potential p1.v &gt; n1.v for positive voltage drop v1)</td></tr>
<tr><td>NegativePin</td><td>n1</td><td>Negative pin of the left port</td></tr>
<tr><td>PositivePin</td><td>p2</td><td>Positive pin of the right port (potential p2.v &gt; n2.v for positive voltage drop v2)</td></tr>
<tr><td>NegativePin</td><td>n2</td><td>Negative pin of the right port</td></tr>
<tr><td>input RealInput</td><td>d</td><td>Duty cycle</td></tr>
</table>
<h3>Filename</h3>
<pre>PVSystems_Electrical.html</pre>
<h3>Modelica definition</h3>
<div class="modelica"><span class="ModelicaKeyword">model</span> CCM1 <span class="ModelicaComment">&quot;Average CCM model with no losses&quot;</span>
  <span class="ModelicaKeyword">extends </span><a href="PVSystems_Electrical_Interfaces.html#PVSystems.Electrical.Interfaces.SwitchNetworkInterface"
>Interfaces.SwitchNetworkInterface</a>;
<span class="ModelicaKeyword">equation </span>
  0 = p1.i + n1.i;
  0 = p2.i + n2.i;
  v1 = (1 - dsat)/dsat*v2;
  -i2 = (1 - dsat)/dsat*i1;
<span class="ModelicaKeyword">end </span>CCM1;
</div>
<hr>
<!--[if supportFields]><span style="mso-element:field-begin"></span>
<span style="mso-spacerun:yes"></span>XE CCM2<![endif]-->
<!--[if supportFields]><span style="mso-element:field-end"></span><![endif]-->
<h2><img src="PVSystems.Electrical.SW1I.png" alt="PVSystems.Electrical.CCM2" align="right" style="border: 1px solid" width="80" height="80">
<a name="PVSystems.Electrical.CCM2"></a><a href="PVSystems_Electrical.html#PVSystems.Electrical"
>PVSystems.Electrical</a>.CCM2</h2>
<p>
<span class="ModelicaDescription">Average CCM model with conduction losses</span>
<br>
<br><img src="PVSystems.Electrical.CCM1D.png" alt="PVSystems.Electrical.CCM2">
</p>
<h3>Information</h3>

      <p>
        <em>Application</em>: two-switch PWM converters, includes
        conduction losses due to Ron, VD, Rd.
      </p>
    
      <p>
        <em>Limitations</em>: CCM only, no transformer.
      </p>
    
      <p>
        Model taken
        from <a href="PVSystems_UsersGuide_References.html#PVSystems.UsersGuide.References.EM01"
>EM01</a>
        and <a href="PVSystems_UsersGuide_References.html#PVSystems.UsersGuide.References.EMA16"
>EMA16</a>.</p>
    
<p><span class="ModelicaBaseClass">Extends from <a href="PVSystems_Electrical_Interfaces.html#PVSystems.Electrical.Interfaces.SwitchNetworkInterface"
>Interfaces.SwitchNetworkInterface</a> (Interface for the averaged switch network models).</span></p>
<h3>Parameters</h3>
<table summary="Parameters" class="ModelicaTableParameters">
<tr><th>Type</th><th>Name</th><th>Default</th><th>Description</th></tr>
<tr><td>Real</td><td>dmin</td><td>1e-3</td><td>Minimum duty cycle [1]</td></tr>
<tr><td>Real</td><td>dmax</td><td>1</td><td>Maximum duty cycle [1]</td></tr>
<tr><td><a href="Modelica_SIunits.html#Modelica.SIunits.Resistance"
>Resistance</a></td><td>Ron</td><td>0</td><td>Transistor on resistance [Ohm]</td></tr>
<tr><td><a href="Modelica_SIunits.html#Modelica.SIunits.Resistance"
>Resistance</a></td><td>RD</td><td>0</td><td>Diode on resistance [Ohm]</td></tr>
<tr><td><a href="Modelica_SIunits.html#Modelica.SIunits.Voltage"
>Voltage</a></td><td>VD</td><td>0</td><td>Diode forward voltage drop [V]</td></tr>
</table>
<h3>Connectors</h3>
<table summary="Connectors" class="ModelicaTableConnectors">
<tr><th>Type</th><th>Name</th><th>Description</th></tr>
<tr><td>PositivePin</td><td>p1</td><td>Positive pin of the left port (potential p1.v &gt; n1.v for positive voltage drop v1)</td></tr>
<tr><td>NegativePin</td><td>n1</td><td>Negative pin of the left port</td></tr>
<tr><td>PositivePin</td><td>p2</td><td>Positive pin of the right port (potential p2.v &gt; n2.v for positive voltage drop v2)</td></tr>
<tr><td>NegativePin</td><td>n2</td><td>Negative pin of the right port</td></tr>
<tr><td>input RealInput</td><td>d</td><td>Duty cycle</td></tr>
</table>
<h3>Filename</h3>
<pre>PVSystems_Electrical.html</pre>
<h3>Modelica definition</h3>
<div class="modelica"><span class="ModelicaKeyword">model</span> CCM2 <span class="ModelicaComment">&quot;Average CCM model with conduction losses&quot;</span>
  <span class="ModelicaKeyword">extends </span><a href="PVSystems_Electrical_Interfaces.html#PVSystems.Electrical.Interfaces.SwitchNetworkInterface"
>Interfaces.SwitchNetworkInterface</a>;
  <span class="ModelicaKeyword">parameter </span><a href="Modelica_SIunits.html#Modelica.SIunits.Resistance"
>Modelica.SIunits.Resistance</a> Ron=0 <span class="ModelicaComment">&quot;Transistor on resistance&quot;</span>;
  <span class="ModelicaKeyword">parameter </span><a href="Modelica_SIunits.html#Modelica.SIunits.Resistance"
>Modelica.SIunits.Resistance</a> RD=0 <span class="ModelicaComment">&quot;Diode on resistance&quot;</span>;
  <span class="ModelicaKeyword">parameter </span><a href="Modelica_SIunits.html#Modelica.SIunits.Voltage"
>Modelica.SIunits.Voltage</a> VD=0 <span class="ModelicaComment">&quot;Diode forward voltage drop&quot;</span>;
<span class="ModelicaKeyword">equation </span>
  0 = p1.i + n1.i;
  0 = p2.i + n2.i;
  v1 = i1*(Ron/dsat + (1 - dsat)*RD/dsat^2) + (1 - dsat)/dsat*(v2 + VD);
  -i2 = i1*(1 - dsat)/dsat;
<span class="ModelicaKeyword">end </span>CCM2;
</div>
<hr>
<!--[if supportFields]><span style="mso-element:field-begin"></span>
<span style="mso-spacerun:yes"></span>XE CCM3<![endif]-->
<!--[if supportFields]><span style="mso-element:field-end"></span><![endif]-->
<h2><img src="PVSystems.Electrical.SW1I.png" alt="PVSystems.Electrical.CCM3" align="right" style="border: 1px solid" width="80" height="80">
<a name="PVSystems.Electrical.CCM3"></a><a href="PVSystems_Electrical.html#PVSystems.Electrical"
>PVSystems.Electrical</a>.CCM3</h2>
<p>
<span class="ModelicaDescription">Average CCM model with no losses and tranformer</span>
<br>
<br><img src="PVSystems.Electrical.CCM1D.png" alt="PVSystems.Electrical.CCM3">
</p>
<h3>Information</h3>

      <p>
        <em>Application</em>: two-switch PWM converters, with (possibly)
        transformer.
      </p>
    
      <p>
        <em>Limitations</em>: ideal switches, CCM only.
      </p>
    
      <p>
        Model taken
        from <a href="PVSystems_UsersGuide_References.html#PVSystems.UsersGuide.References.EM01"
>EM01</a>
        and <a href="PVSystems_UsersGuide_References.html#PVSystems.UsersGuide.References.EMA16"
>EMA16</a>.</p>
    
<p><span class="ModelicaBaseClass">Extends from <a href="PVSystems_Electrical_Interfaces.html#PVSystems.Electrical.Interfaces.SwitchNetworkInterface"
>Interfaces.SwitchNetworkInterface</a> (Interface for the averaged switch network models).</span></p>
<h3>Parameters</h3>
<table summary="Parameters" class="ModelicaTableParameters">
<tr><th>Type</th><th>Name</th><th>Default</th><th>Description</th></tr>
<tr><td>Real</td><td>dmin</td><td>1e-3</td><td>Minimum duty cycle [1]</td></tr>
<tr><td>Real</td><td>dmax</td><td>1</td><td>Maximum duty cycle [1]</td></tr>
<tr><td>Real</td><td>n</td><td>1</td><td>Transformer turns ratio 1:n (primary:secondary) [1]</td></tr>
</table>
<h3>Connectors</h3>
<table summary="Connectors" class="ModelicaTableConnectors">
<tr><th>Type</th><th>Name</th><th>Description</th></tr>
<tr><td>PositivePin</td><td>p1</td><td>Positive pin of the left port (potential p1.v &gt; n1.v for positive voltage drop v1)</td></tr>
<tr><td>NegativePin</td><td>n1</td><td>Negative pin of the left port</td></tr>
<tr><td>PositivePin</td><td>p2</td><td>Positive pin of the right port (potential p2.v &gt; n2.v for positive voltage drop v2)</td></tr>
<tr><td>NegativePin</td><td>n2</td><td>Negative pin of the right port</td></tr>
<tr><td>input RealInput</td><td>d</td><td>Duty cycle</td></tr>
</table>
<h3>Filename</h3>
<pre>PVSystems_Electrical.html</pre>
<h3>Modelica definition</h3>
<div class="modelica"><span class="ModelicaKeyword">model</span> CCM3 <span class="ModelicaComment">&quot;Average CCM model with no losses and tranformer&quot;</span>
  <span class="ModelicaKeyword">extends </span><a href="PVSystems_Electrical_Interfaces.html#PVSystems.Electrical.Interfaces.SwitchNetworkInterface"
>Interfaces.SwitchNetworkInterface</a>;
  <span class="ModelicaKeyword">parameter </span>Real n(<span class="ModelicaKeyword">final </span>unit=&quot;1&quot;) = 1
    <span class="ModelicaComment">&quot;Transformer turns ratio 1:n (primary:secondary)&quot;</span>;
<span class="ModelicaKeyword">equation </span>
  0 = p1.i + n1.i;
  0 = p2.i + n2.i;
  v1 = (1 - dsat)*v2/dsat/n;
  -i2 = (1 - dsat)*i1/dsat/n;
<span class="ModelicaKeyword">end </span>CCM3;
</div>
<hr>
<!--[if supportFields]><span style="mso-element:field-begin"></span>
<span style="mso-spacerun:yes"></span>XE CCM4<![endif]-->
<!--[if supportFields]><span style="mso-element:field-end"></span><![endif]-->
<h2><img src="PVSystems.Electrical.SW1I.png" alt="PVSystems.Electrical.CCM4" align="right" style="border: 1px solid" width="80" height="80">
<a name="PVSystems.Electrical.CCM4"></a><a href="PVSystems_Electrical.html#PVSystems.Electrical"
>PVSystems.Electrical</a>.CCM4</h2>
<p>
<span class="ModelicaDescription">Average CCM model with conduction losses and tranformer</span>
<br>
<br><img src="PVSystems.Electrical.CCM1D.png" alt="PVSystems.Electrical.CCM4">
</p>
<h3>Information</h3>

      <p>
        <em>Application</em>: two-switch PWM converters, includes
        conduction losses due to Ron, VD, RD and (possibly) transformer.
      </p>
    
      <p>
        <em>Limitations</em>: CCM only.
      </p>
    
      <p>
        Model taken
        from <a href="PVSystems_UsersGuide_References.html#PVSystems.UsersGuide.References.EM01"
>EM01</a>
        and <a href="PVSystems_UsersGuide_References.html#PVSystems.UsersGuide.References.EMA16"
>EMA16</a>.</p>
    
<p><span class="ModelicaBaseClass">Extends from <a href="PVSystems_Electrical_Interfaces.html#PVSystems.Electrical.Interfaces.SwitchNetworkInterface"
>Interfaces.SwitchNetworkInterface</a> (Interface for the averaged switch network models).</span></p>
<h3>Parameters</h3>
<table summary="Parameters" class="ModelicaTableParameters">
<tr><th>Type</th><th>Name</th><th>Default</th><th>Description</th></tr>
<tr><td>Real</td><td>dmin</td><td>1e-3</td><td>Minimum duty cycle [1]</td></tr>
<tr><td>Real</td><td>dmax</td><td>1</td><td>Maximum duty cycle [1]</td></tr>
<tr><td><a href="Modelica_SIunits.html#Modelica.SIunits.Resistance"
>Resistance</a></td><td>Ron</td><td>0</td><td>Transistor on resistance [Ohm]</td></tr>
<tr><td><a href="Modelica_SIunits.html#Modelica.SIunits.Resistance"
>Resistance</a></td><td>RD</td><td>0</td><td>Diode on resistance [Ohm]</td></tr>
<tr><td>Real</td><td>n</td><td>1</td><td>Transformer turns ratio 1:n (primary:secondary) [1]</td></tr>
</table>
<h3>Connectors</h3>
<table summary="Connectors" class="ModelicaTableConnectors">
<tr><th>Type</th><th>Name</th><th>Description</th></tr>
<tr><td>PositivePin</td><td>p1</td><td>Positive pin of the left port (potential p1.v &gt; n1.v for positive voltage drop v1)</td></tr>
<tr><td>NegativePin</td><td>n1</td><td>Negative pin of the left port</td></tr>
<tr><td>PositivePin</td><td>p2</td><td>Positive pin of the right port (potential p2.v &gt; n2.v for positive voltage drop v2)</td></tr>
<tr><td>NegativePin</td><td>n2</td><td>Negative pin of the right port</td></tr>
<tr><td>input RealInput</td><td>d</td><td>Duty cycle</td></tr>
</table>
<h3>Filename</h3>
<pre>PVSystems_Electrical.html</pre>
<h3>Modelica definition</h3>
<div class="modelica"><span class="ModelicaKeyword">model</span> CCM4 <span class="ModelicaComment">&quot;Average CCM model with conduction losses and tranformer&quot;</span>
  <span class="ModelicaKeyword">extends </span><a href="PVSystems_Electrical_Interfaces.html#PVSystems.Electrical.Interfaces.SwitchNetworkInterface"
>Interfaces.SwitchNetworkInterface</a>;
  <span class="ModelicaKeyword">parameter </span><a href="Modelica_SIunits.html#Modelica.SIunits.Resistance"
>Modelica.SIunits.Resistance</a> Ron=0 <span class="ModelicaComment">&quot;Transistor on resistance&quot;</span>;
  <span class="ModelicaKeyword">parameter </span><a href="Modelica_SIunits.html#Modelica.SIunits.Resistance"
>Modelica.SIunits.Resistance</a> RD=0 <span class="ModelicaComment">&quot;Diode on resistance&quot;</span>;
  <span class="ModelicaKeyword">parameter </span>Real n(<span class="ModelicaKeyword">final </span>unit=&quot;1&quot;) = 1
    <span class="ModelicaComment">&quot;Transformer turns ratio 1:n (primary:secondary)&quot;</span>;
<span class="ModelicaKeyword">equation </span>
  0 = p1.i + n1.i;
  0 = p2.i + n2.i;
  v1 = i1*(Ron/dsat + (1 - dsat)*RD/n^2/dsat^2) + (1 - dsat)/dsat/n*v2;
  -i2 = i1*(1 - dsat)/dsat/n;
<span class="ModelicaKeyword">end </span>CCM4;
</div>
<hr>
<!--[if supportFields]><span style="mso-element:field-begin"></span>
<span style="mso-spacerun:yes"></span>XE CCM5<![endif]-->
<!--[if supportFields]><span style="mso-element:field-end"></span><![endif]-->
<h2><img src="PVSystems.Electrical.SW1I.png" alt="PVSystems.Electrical.CCM5" align="right" style="border: 1px solid" width="80" height="80">
<a name="PVSystems.Electrical.CCM5"></a><a href="PVSystems_Electrical.html#PVSystems.Electrical"
>PVSystems.Electrical</a>.CCM5</h2>
<p>
<span class="ModelicaDescription">Average CCM model with conduction losses and diode reverse recovery</span>
<br>
<br><img src="PVSystems.Electrical.CCM1D.png" alt="PVSystems.Electrical.CCM5">
</p>
<h3>Information</h3>

      <p>
        <em>Application</em>: two-switch PWM converters, includes
        conduction losses due to Ron, VD and diode reverse recovery
        losses.
      </p>
    
      <p>
        <em>Limitations</em>: CCM only, d'&gt;tr/Ts, &lt;i1&gt; &gt;
        Qr/Ts.
      </p>
    
      <p>
        Model taken
        from <a href="PVSystems_UsersGuide_References.html#PVSystems.UsersGuide.References.EM01"
>EM01</a>
        and <a href="PVSystems_UsersGuide_References.html#PVSystems.UsersGuide.References.EMA16"
>EMA16</a>.</p>
    
<p><span class="ModelicaBaseClass">Extends from <a href="PVSystems_Electrical_Interfaces.html#PVSystems.Electrical.Interfaces.SwitchNetworkInterface"
>Interfaces.SwitchNetworkInterface</a> (Interface for the averaged switch network models).</span></p>
<h3>Parameters</h3>
<table summary="Parameters" class="ModelicaTableParameters">
<tr><th>Type</th><th>Name</th><th>Default</th><th>Description</th></tr>
<tr><td>Real</td><td>dmin</td><td>1e-3</td><td>Minimum duty cycle [1]</td></tr>
<tr><td>Real</td><td>dmax</td><td>1</td><td>Maximum duty cycle [1]</td></tr>
<tr><td><a href="Modelica_SIunits.html#Modelica.SIunits.Resistance"
>Resistance</a></td><td>Ron</td><td>0</td><td>Transistor on resistance [Ohm]</td></tr>
<tr><td><a href="Modelica_SIunits.html#Modelica.SIunits.Voltage"
>Voltage</a></td><td>VD</td><td>0</td><td>Diode forward voltage drop [V]</td></tr>
<tr><td><a href="Modelica_SIunits.html#Modelica.SIunits.Charge"
>Charge</a></td><td>Qr</td><td>&nbsp;</td><td>Diode reverse recovery charge [C]</td></tr>
<tr><td><a href="Modelica_SIunits.html#Modelica.SIunits.Time"
>Time</a></td><td>tr</td><td>&nbsp;</td><td>Diode reverse recovery time [s]</td></tr>
<tr><td><a href="Modelica_SIunits.html#Modelica.SIunits.Frequency"
>Frequency</a></td><td>fs</td><td>&nbsp;</td><td>Switching frequency [Hz]</td></tr>
</table>
<h3>Connectors</h3>
<table summary="Connectors" class="ModelicaTableConnectors">
<tr><th>Type</th><th>Name</th><th>Description</th></tr>
<tr><td>PositivePin</td><td>p1</td><td>Positive pin of the left port (potential p1.v &gt; n1.v for positive voltage drop v1)</td></tr>
<tr><td>NegativePin</td><td>n1</td><td>Negative pin of the left port</td></tr>
<tr><td>PositivePin</td><td>p2</td><td>Positive pin of the right port (potential p2.v &gt; n2.v for positive voltage drop v2)</td></tr>
<tr><td>NegativePin</td><td>n2</td><td>Negative pin of the right port</td></tr>
<tr><td>input RealInput</td><td>d</td><td>Duty cycle</td></tr>
</table>
<h3>Filename</h3>
<pre>PVSystems_Electrical.html</pre>
<h3>Modelica definition</h3>
<div class="modelica"><span class="ModelicaKeyword">model</span> CCM5
  <span class="ModelicaComment">&quot;Average CCM model with conduction losses and diode reverse recovery&quot;</span>
  <span class="ModelicaKeyword">extends </span><a href="PVSystems_Electrical_Interfaces.html#PVSystems.Electrical.Interfaces.SwitchNetworkInterface"
>Interfaces.SwitchNetworkInterface</a>;
  <span class="ModelicaKeyword">parameter </span><a href="Modelica_SIunits.html#Modelica.SIunits.Resistance"
>Modelica.SIunits.Resistance</a> Ron=0 <span class="ModelicaComment">&quot;Transistor on resistance&quot;</span>;
  <span class="ModelicaKeyword">parameter </span><a href="Modelica_SIunits.html#Modelica.SIunits.Voltage"
>Modelica.SIunits.Voltage</a> VD=0 <span class="ModelicaComment">&quot;Diode forward voltage drop&quot;</span>;
  <span class="ModelicaKeyword">parameter </span><a href="Modelica_SIunits.html#Modelica.SIunits.Charge"
>Modelica.SIunits.Charge</a> Qr <span class="ModelicaComment">&quot;Diode reverse recovery charge&quot;</span>;
  <span class="ModelicaKeyword">parameter </span><a href="Modelica_SIunits.html#Modelica.SIunits.Time"
>Modelica.SIunits.Time</a> tr <span class="ModelicaComment">&quot;Diode reverse recovery time&quot;</span>;
  <span class="ModelicaKeyword">parameter </span><a href="Modelica_SIunits.html#Modelica.SIunits.Frequency"
>Modelica.SIunits.Frequency</a> fs <span class="ModelicaComment">&quot;Switching frequency&quot;</span>;
<span class="ModelicaKeyword">equation </span>
  0 = p1.i + n1.i;
  0 = p2.i + n2.i;
  v1 = (i1 - fs*Qr)*Ron/(dsat + fs*tr) + (1 - dsat)/dsat*(v2 + VD);
  -i2 = i1*(1 - dsat - fs*tr)/(dsat + fs*tr) - fs*Qr/(dsat + fs*tr);
<span class="ModelicaKeyword">end </span>CCM5;
</div>
<hr>
<!--[if supportFields]><span style="mso-element:field-begin"></span>
<span style="mso-spacerun:yes"></span>XE CCM_DCM1<![endif]-->
<!--[if supportFields]><span style="mso-element:field-end"></span><![endif]-->
<h2><img src="PVSystems.Electrical.SW1I.png" alt="PVSystems.Electrical.CCM_DCM1" align="right" style="border: 1px solid" width="80" height="80">
<a name="PVSystems.Electrical.CCM_DCM1"></a><a href="PVSystems_Electrical.html#PVSystems.Electrical"
>PVSystems.Electrical</a>.CCM_DCM1</h2>
<p>
<span class="ModelicaDescription">Average CCM-DCM model with no losses</span>
<br>
<br><img src="PVSystems.Electrical.CCM1D.png" alt="PVSystems.Electrical.CCM_DCM1">
</p>
<h3>Information</h3>

      <p>
        <em>Application</em>: two-switch PWM converters, CCM or DCM.
      </p>
    
      <p>
        <em>Limitations</em>: ideal switches, no transformer.
      </p>
    
      <p>
        Model taken
        from <a href="PVSystems_UsersGuide_References.html#PVSystems.UsersGuide.References.EM01"
>EM01</a>
        and <a href="PVSystems_UsersGuide_References.html#PVSystems.UsersGuide.References.EMA16"
>EMA16</a>.</p>
    
<p><span class="ModelicaBaseClass">Extends from <a href="PVSystems_Electrical_Interfaces.html#PVSystems.Electrical.Interfaces.SwitchNetworkInterface"
>Interfaces.SwitchNetworkInterface</a> (Interface for the averaged switch network models).</span></p>
<h3>Parameters</h3>
<table summary="Parameters" class="ModelicaTableParameters">
<tr><th>Type</th><th>Name</th><th>Default</th><th>Description</th></tr>
<tr><td>Real</td><td>dmin</td><td>1e-3</td><td>Minimum duty cycle [1]</td></tr>
<tr><td>Real</td><td>dmax</td><td>1</td><td>Maximum duty cycle [1]</td></tr>
<tr><td><a href="Modelica_SIunits.html#Modelica.SIunits.Inductance"
>Inductance</a></td><td>Le</td><td>&nbsp;</td><td>Equivalent DCM inductance [H]</td></tr>
<tr><td><a href="Modelica_SIunits.html#Modelica.SIunits.Frequency"
>Frequency</a></td><td>fs</td><td>&nbsp;</td><td>Switching frequency [Hz]</td></tr>
</table>
<h3>Connectors</h3>
<table summary="Connectors" class="ModelicaTableConnectors">
<tr><th>Type</th><th>Name</th><th>Description</th></tr>
<tr><td>PositivePin</td><td>p1</td><td>Positive pin of the left port (potential p1.v &gt; n1.v for positive voltage drop v1)</td></tr>
<tr><td>NegativePin</td><td>n1</td><td>Negative pin of the left port</td></tr>
<tr><td>PositivePin</td><td>p2</td><td>Positive pin of the right port (potential p2.v &gt; n2.v for positive voltage drop v2)</td></tr>
<tr><td>NegativePin</td><td>n2</td><td>Negative pin of the right port</td></tr>
<tr><td>input RealInput</td><td>d</td><td>Duty cycle</td></tr>
</table>
<h3>Filename</h3>
<pre>PVSystems_Electrical.html</pre>
<h3>Modelica definition</h3>
<div class="modelica"><span class="ModelicaKeyword">model</span> CCM_DCM1 <span class="ModelicaComment">&quot;Average CCM-DCM model with no losses&quot;</span>
  <span class="ModelicaKeyword">extends </span><a href="PVSystems_Electrical_Interfaces.html#PVSystems.Electrical.Interfaces.SwitchNetworkInterface"
>Interfaces.SwitchNetworkInterface</a>;
  <span class="ModelicaKeyword">parameter </span><a href="Modelica_SIunits.html#Modelica.SIunits.Inductance"
>Modelica.SIunits.Inductance</a> Le <span class="ModelicaComment">&quot;Equivalent DCM inductance&quot;</span>;
  <span class="ModelicaKeyword">parameter </span><a href="Modelica_SIunits.html#Modelica.SIunits.Frequency"
>Modelica.SIunits.Frequency</a> fs <span class="ModelicaComment">&quot;Switching frequency&quot;</span>;
<span class="ModelicaKeyword">protected </span>
  Real mu <span class="ModelicaComment">&quot;Effective switch conversion ratio&quot;</span>;
  Real Re <span class="ModelicaComment">&quot;Equivalent DCM port 1 resistance&quot;</span>;
<span class="ModelicaKeyword">equation </span>
  0 = p1.i + n1.i;
  0 = p2.i + n2.i;
  Re = 2*Le*fs/dsat^2;
  mu =<span class="ModelicaFunction"> max</span>(dsat, 1/(1 + Re*i1/v2));
  v1 = (1 - mu)/mu*v2;
  -i2 = (1 - mu)/mu*i1;
<span class="ModelicaKeyword">end </span>CCM_DCM1;
</div>
<hr>
<!--[if supportFields]><span style="mso-element:field-begin"></span>
<span style="mso-spacerun:yes"></span>XE CCM_DCM2<![endif]-->
<!--[if supportFields]><span style="mso-element:field-end"></span><![endif]-->
<h2><img src="PVSystems.Electrical.SW1I.png" alt="PVSystems.Electrical.CCM_DCM2" align="right" style="border: 1px solid" width="80" height="80">
<a name="PVSystems.Electrical.CCM_DCM2"></a><a href="PVSystems_Electrical.html#PVSystems.Electrical"
>PVSystems.Electrical</a>.CCM_DCM2</h2>
<p>
<span class="ModelicaDescription">Average CCM-DCM model with no losses and transformer</span>
<br>
<br><img src="PVSystems.Electrical.CCM1D.png" alt="PVSystems.Electrical.CCM_DCM2">
</p>
<h3>Information</h3>

      <p>
        <em>Application</em>: two-switch PWM converters, CCM or DCM with
        (possibly) transformer.
      </p>
    
      <p>
        <em>Limitations</em>: ideal switches.
      </p>
    
      <p>
        Model taken
        from <a href="PVSystems_UsersGuide_References.html#PVSystems.UsersGuide.References.EM01"
>EM01</a>
        and <a href="PVSystems_UsersGuide_References.html#PVSystems.UsersGuide.References.EMA16"
>EMA16</a>.</p>
    
<p><span class="ModelicaBaseClass">Extends from <a href="PVSystems_Electrical_Interfaces.html#PVSystems.Electrical.Interfaces.SwitchNetworkInterface"
>Interfaces.SwitchNetworkInterface</a> (Interface for the averaged switch network models).</span></p>
<h3>Parameters</h3>
<table summary="Parameters" class="ModelicaTableParameters">
<tr><th>Type</th><th>Name</th><th>Default</th><th>Description</th></tr>
<tr><td>Real</td><td>dmin</td><td>1e-3</td><td>Minimum duty cycle [1]</td></tr>
<tr><td>Real</td><td>dmax</td><td>1</td><td>Maximum duty cycle [1]</td></tr>
<tr><td><a href="Modelica_SIunits.html#Modelica.SIunits.Inductance"
>Inductance</a></td><td>Le</td><td>&nbsp;</td><td>Equivalent DCM inductance [H]</td></tr>
<tr><td><a href="Modelica_SIunits.html#Modelica.SIunits.Frequency"
>Frequency</a></td><td>fs</td><td>&nbsp;</td><td>Switching frequency [Hz]</td></tr>
<tr><td>Real</td><td>n</td><td>1</td><td>Transformer turns ratio 1:n (primary:secondary) [1]</td></tr>
</table>
<h3>Connectors</h3>
<table summary="Connectors" class="ModelicaTableConnectors">
<tr><th>Type</th><th>Name</th><th>Description</th></tr>
<tr><td>PositivePin</td><td>p1</td><td>Positive pin of the left port (potential p1.v &gt; n1.v for positive voltage drop v1)</td></tr>
<tr><td>NegativePin</td><td>n1</td><td>Negative pin of the left port</td></tr>
<tr><td>PositivePin</td><td>p2</td><td>Positive pin of the right port (potential p2.v &gt; n2.v for positive voltage drop v2)</td></tr>
<tr><td>NegativePin</td><td>n2</td><td>Negative pin of the right port</td></tr>
<tr><td>input RealInput</td><td>d</td><td>Duty cycle</td></tr>
</table>
<h3>Filename</h3>
<pre>PVSystems_Electrical.html</pre>
<h3>Modelica definition</h3>
<div class="modelica"><span class="ModelicaKeyword">model</span> CCM_DCM2 <span class="ModelicaComment">&quot;Average CCM-DCM model with no losses and transformer&quot;</span>
  <span class="ModelicaKeyword">extends </span><a href="PVSystems_Electrical_Interfaces.html#PVSystems.Electrical.Interfaces.SwitchNetworkInterface"
>Interfaces.SwitchNetworkInterface</a>;
  <span class="ModelicaKeyword">parameter </span><a href="Modelica_SIunits.html#Modelica.SIunits.Inductance"
>Modelica.SIunits.Inductance</a> Le <span class="ModelicaComment">&quot;Equivalent DCM inductance&quot;</span>;
  <span class="ModelicaKeyword">parameter </span><a href="Modelica_SIunits.html#Modelica.SIunits.Frequency"
>Modelica.SIunits.Frequency</a> fs <span class="ModelicaComment">&quot;Switching frequency&quot;</span>;
  <span class="ModelicaKeyword">parameter </span>Real n(<span class="ModelicaKeyword">final </span>unit=&quot;1&quot;) = 1
    <span class="ModelicaComment">&quot;Transformer turns ratio 1:n (primary:secondary)&quot;</span>;
<span class="ModelicaKeyword">protected </span>
  Real mu <span class="ModelicaComment">&quot;Effective switch conversion ratio&quot;</span>;
  Real Re <span class="ModelicaComment">&quot;Equivalent DCM port 1 resistance&quot;</span>;
<span class="ModelicaKeyword">equation </span>
  0 = p1.i + n1.i;
  0 = p2.i + n2.i;
  Re = 2*Le*fs/dsat^2;
  mu =<span class="ModelicaFunction"> max</span>(dsat, 1/(1 + Re*i1/v2));
  v1 = (1 - mu)*v2/mu/n;
  -i2 = (1 - mu)*i1/mu/n;
<span class="ModelicaKeyword">end </span>CCM_DCM2;
</div>
<hr>
<!--[if supportFields]><span style="mso-element:field-begin"></span>
<span style="mso-spacerun:yes"></span>XE PVArray<![endif]-->
<!--[if supportFields]><span style="mso-element:field-end"></span><![endif]-->
<h2><img src="PVSystems.Electrical.PVArrayI.png" alt="PVSystems.Electrical.PVArray" align="right" style="border: 1px solid" width="80" height="80">
<a name="PVSystems.Electrical.PVArray"></a><a href="PVSystems_Electrical.html#PVSystems.Electrical"
>PVSystems.Electrical</a>.PVArray</h2>
<p>
<span class="ModelicaDescription">Flexible PV array model</span>
<br>
<br><img src="PVSystems.Electrical.PVArrayD.png" alt="PVSystems.Electrical.PVArray">
</p>
<h3>Information</h3>
<p>Flexible PV array model. The model can be
  parametrized with the use of PV module datasheets. As a default, the
  data from the Kyocera KC200GT is provided. The model is presented in
  "Comprehensive Approach to Modeling and Simulation of Photovoltaic
  Arrays" by M.G. Villalva et al.</p>
<p><span class="ModelicaBaseClass">Extends from Modelica.Electrical.Analog.Interfaces.OnePort (Component with two electrical pins p and n and current i from p to n).</span></p>
<h3>Parameters</h3>
<table summary="Parameters" class="ModelicaTableParameters">
<tr><th>Type</th><th>Name</th><th>Default</th><th>Description</th></tr>
<tr><td><a href="Modelica_SIunits.html#Modelica.SIunits.Current"
>Current</a></td><td>Imp</td><td>7.61</td><td>Maximum power current [A]</td></tr>
<tr><td><a href="Modelica_SIunits.html#Modelica.SIunits.Voltage"
>Voltage</a></td><td>Vmp</td><td>26.3</td><td>Maximum power voltage [V]</td></tr>
<tr><td><a href="Modelica_SIunits.html#Modelica.SIunits.Current"
>Current</a></td><td>Iscn</td><td>8.21</td><td>Short circuit current [A]</td></tr>
<tr><td><a href="Modelica_SIunits.html#Modelica.SIunits.Voltage"
>Voltage</a></td><td>Vocn</td><td>32.9</td><td>Open circuit voltage [V]</td></tr>
<tr><td>Real</td><td>Kv</td><td>-0.123</td><td>Voc temperature coefficient</td></tr>
<tr><td>Real</td><td>Ki</td><td>3.18e-3</td><td>Isc temperature coefficient</td></tr>
<tr><td>Real</td><td>Ns</td><td>54</td><td>Number of cells in series</td></tr>
<tr><td>Real</td><td>Np</td><td>1</td><td>Number of cells in parallel</td></tr>
<tr><td><a href="Modelica_SIunits.html#Modelica.SIunits.Resistance"
>Resistance</a></td><td>Rs</td><td>0.221</td><td>Equivalent series resistance of array [Ohm]</td></tr>
<tr><td><a href="Modelica_SIunits.html#Modelica.SIunits.Resistance"
>Resistance</a></td><td>Rp</td><td>415.405</td><td>Equivalent parallel resistance of array [Ohm]</td></tr>
<tr><td>Real</td><td>a</td><td>1.3</td><td>Diode ideality constant</td></tr>
<tr><td><a href="Modelica_SIunits.html#Modelica.SIunits.Current"
>Current</a></td><td>Ipvn</td><td>Iscn</td><td>Photovoltaic current at STC [A]</td></tr>
</table>
<h3>Connectors</h3>
<table summary="Connectors" class="ModelicaTableConnectors">
<tr><th>Type</th><th>Name</th><th>Description</th></tr>
<tr><td>PositivePin</td><td>p</td><td>Positive pin (potential p.v &gt; n.v for positive voltage drop v)</td></tr>
<tr><td>NegativePin</td><td>n</td><td>Negative pin</td></tr>
<tr><td>input RealInput</td><td>G</td><td>Solar irradiation</td></tr>
<tr><td>input RealInput</td><td>T</td><td>Panel temperature</td></tr>
</table>
<h3>Filename</h3>
<pre>PVSystems_Electrical.html</pre>
<h3>Modelica definition</h3>
<div class="modelica"><span class="ModelicaKeyword">model</span> PVArray <span class="ModelicaComment">&quot;Flexible PV array model&quot;</span>
  <span class="ModelicaKeyword">extends </span><a href="Modelica_Electrical_Analog_Interfaces.html#Modelica.Electrical.Analog.Interfaces.OnePort"
>Modelica.Electrical.Analog.Interfaces.OnePort</a>;
  <span class="ModelicaComment">// Interface</span>
  <a href="Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealInput"
>Modelica.Blocks.Interfaces.RealInput</a> G <span class="ModelicaComment">&quot;Solar irradiation&quot;</span>;
  <a href="Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealInput"
>Modelica.Blocks.Interfaces.RealInput</a> T <span class="ModelicaComment">&quot;Panel temperature&quot;</span>;
  <span class="ModelicaComment">// Constants</span>
  <span class="ModelicaKeyword">constant </span><a href="Modelica_SIunits.html#Modelica.SIunits.Charge"
>Modelica.SIunits.Charge</a> q=1.60217646e-19 <span class="ModelicaComment">&quot;Electron charge&quot;</span>;
  <span class="ModelicaKeyword">constant </span>Real Gn=1000 <span class="ModelicaComment">&quot;STC irradiation&quot;</span>;
  <span class="ModelicaKeyword">constant </span><a href="Modelica_SIunits.html#Modelica.SIunits.Temperature"
>Modelica.SIunits.Temperature</a> Tn=298.15 <span class="ModelicaComment">&quot;STC temperature&quot;</span>;
  <span class="ModelicaComment">// Basic datasheet parameters</span>
  <span class="ModelicaKeyword">parameter </span><a href="Modelica_SIunits.html#Modelica.SIunits.Current"
>Modelica.SIunits.Current</a> Imp=7.61 <span class="ModelicaComment">&quot;Maximum power current&quot;</span>;
  <span class="ModelicaKeyword">parameter </span><a href="Modelica_SIunits.html#Modelica.SIunits.Voltage"
>Modelica.SIunits.Voltage</a> Vmp=26.3 <span class="ModelicaComment">&quot;Maximum power voltage&quot;</span>;
  <span class="ModelicaKeyword">parameter </span><a href="Modelica_SIunits.html#Modelica.SIunits.Current"
>Modelica.SIunits.Current</a> Iscn=8.21 <span class="ModelicaComment">&quot;Short circuit current&quot;</span>;
  <span class="ModelicaKeyword">parameter </span><a href="Modelica_SIunits.html#Modelica.SIunits.Voltage"
>Modelica.SIunits.Voltage</a> Vocn=32.9 <span class="ModelicaComment">&quot;Open circuit voltage&quot;</span>;
  <span class="ModelicaKeyword">parameter </span>Real Kv=-0.123 <span class="ModelicaComment">&quot;Voc temperature coefficient&quot;</span>;
  <span class="ModelicaKeyword">parameter </span>Real Ki=3.18e-3 <span class="ModelicaComment">&quot;Isc temperature coefficient&quot;</span>;
  <span class="ModelicaComment">// Basic model parameters</span>
  <span class="ModelicaKeyword">parameter </span>Real Ns=54 <span class="ModelicaComment">&quot;Number of cells in series&quot;</span>;
  <span class="ModelicaKeyword">parameter </span>Real Np=1 <span class="ModelicaComment">&quot;Number of cells in parallel&quot;</span>;
  <span class="ModelicaKeyword">parameter </span><a href="Modelica_SIunits.html#Modelica.SIunits.Resistance"
>Modelica.SIunits.Resistance</a> Rs=0.221
    <span class="ModelicaComment">&quot;Equivalent series resistance of array&quot;</span>;
  <span class="ModelicaKeyword">parameter </span><a href="Modelica_SIunits.html#Modelica.SIunits.Resistance"
>Modelica.SIunits.Resistance</a> Rp=415.405
    <span class="ModelicaComment">&quot;Equivalent parallel resistance of array&quot;</span>;
  <span class="ModelicaKeyword">parameter </span>Real a=1.3 <span class="ModelicaComment">&quot;Diode ideality constant&quot;</span>;
  <span class="ModelicaComment">// Derived model parameters</span>
  <span class="ModelicaKeyword">parameter </span><a href="Modelica_SIunits.html#Modelica.SIunits.Current"
>Modelica.SIunits.Current</a> Ipvn=Iscn <span class="ModelicaComment">&quot;Photovoltaic current at STC&quot;</span>;
  <span class="ModelicaComment">// Variables</span>
  <a href="Modelica_SIunits.html#Modelica.SIunits.Voltage"
>Modelica.SIunits.Voltage</a> Vt <span class="ModelicaComment">&quot;Thermal voltage of the array&quot;</span>;
  <a href="Modelica_SIunits.html#Modelica.SIunits.Current"
>Modelica.SIunits.Current</a> Ipv <span class="ModelicaComment">&quot;Photovoltaic current of the cell&quot;</span>;
  <a href="Modelica_SIunits.html#Modelica.SIunits.Current"
>Modelica.SIunits.Current</a> I0 <span class="ModelicaComment">&quot;Saturation current of the cell&quot;</span>;
  <a href="Modelica_SIunits.html#Modelica.SIunits.Current"
>Modelica.SIunits.Current</a> Id <span class="ModelicaComment">&quot;Diode current&quot;</span>;
  <a href="Modelica_SIunits.html#Modelica.SIunits.Current"
>Modelica.SIunits.Current</a> Ir <span class="ModelicaComment">&quot;Rp current&quot;</span>;
<span class="ModelicaKeyword">equation </span>
  <span class="ModelicaComment">// Auxiliary variables</span>
  Vt = Ns*Modelica.Constants.k*T/q;
  Ipv = (Ipvn + Ki*(T - Tn))*G/Gn;
  I0 = (Iscn + Ki*(T - Tn))/(<span class="ModelicaFunction">exp</span>((Vocn + Kv*(T - Tn))/a/Vt) - 1);
  Id = I0*(<span class="ModelicaFunction">exp</span>((v - Rs*i)/a/Vt) - 1);
  Ir = (v - Rs*i)/Rp;
  <span class="ModelicaKeyword">if </span>v &lt; 0<span class="ModelicaKeyword"> then</span>
    i = v/((Rs + Rp)/Np);
  <span class="ModelicaKeyword">elseif </span>v &gt; Vocn<span class="ModelicaKeyword"> then</span>
    i = 0;
  <span class="ModelicaKeyword">else</span>
    i = -Np*(Ipv - Id - Ir);
  <span class="ModelicaKeyword">end if</span>;
<span class="ModelicaKeyword">end </span>PVArray;
</div>
<hr>
<!--[if supportFields]><span style="mso-element:field-begin"></span>
<span style="mso-spacerun:yes"></span>XE SimpleBattery<![endif]-->
<!--[if supportFields]><span style="mso-element:field-end"></span><![endif]-->
<h2><img src="PVSystems.Electrical.SimpleBatteryI.png" alt="PVSystems.Electrical.SimpleBattery" align="right" style="border: 1px solid" width="80" height="80">
<a name="PVSystems.Electrical.SimpleBattery"></a><a href="PVSystems_Electrical.html#PVSystems.Electrical"
>PVSystems.Electrical</a>.SimpleBattery</h2>
<p>
<span class="ModelicaDescription">Simple battery model</span>
<br>
<br><img src="PVSystems.Electrical.SimpleBatteryD.png" alt="PVSystems.Electrical.SimpleBattery">
</p>
<h3>Information</h3>
<p><span class="ModelicaBaseClass">Extends from <a href="PVSystems_Electrical_Interfaces.html#PVSystems.Electrical.Interfaces.BatteryInterface"
>Interfaces.BatteryInterface</a> (Partial model for battery).</span></p>
<h3>Parameters</h3>
<table summary="Parameters" class="ModelicaTableParameters">
<tr><th>Type</th><th>Name</th><th>Default</th><th>Description</th></tr>
<tr><td><a href="Modelica_SIunits.html#Modelica.SIunits.Resistance"
>Resistance</a></td><td>Rint</td><td>0.09</td><td>Internal resistance [Ohm]</td></tr>
<tr><td><a href="Modelica_SIunits.html#Modelica.SIunits.Voltage"
>Voltage</a></td><td>E0</td><td>3.7348</td><td>Constant battery voltage [V]</td></tr>
<tr><td><a href="Modelica_SIunits.html#Modelica.SIunits.Voltage"
>Voltage</a></td><td>K</td><td>0.00876</td><td>Polarization voltage [V]</td></tr>
<tr><td>Real</td><td>Q</td><td>1</td><td>Rated battery capacity [A.h]</td></tr>
<tr><td><a href="Modelica_SIunits.html#Modelica.SIunits.Voltage"
>Voltage</a></td><td>A</td><td>0.468</td><td>Exponential region amplitude [V]</td></tr>
<tr><td>Real</td><td>B</td><td>3.5294</td><td>Exponential zone time constant inverse</td></tr>
<tr><td>Real</td><td>DoDini</td><td>0</td><td>Initial Depth of Discharge [A.h]</td></tr>
</table>
<h3>Connectors</h3>
<table summary="Connectors" class="ModelicaTableConnectors">
<tr><th>Type</th><th>Name</th><th>Description</th></tr>
<tr><td>PositivePin</td><td>p</td><td>Positive pin (potential p.v &gt; n.v for positive voltage drop v)</td></tr>
<tr><td>NegativePin</td><td>n</td><td>Negative pin</td></tr>
</table>
<h3>Filename</h3>
<pre>PVSystems_Electrical.html</pre>
<h3>Modelica definition</h3>
<div class="modelica"><span class="ModelicaKeyword">model</span> SimpleBattery <span class="ModelicaComment">&quot;Simple battery model&quot;</span>
  <span class="ModelicaKeyword">extends </span><a href="PVSystems_Electrical_Interfaces.html#PVSystems.Electrical.Interfaces.BatteryInterface"
>Interfaces.BatteryInterface</a>;
  <span class="ModelicaKeyword">import </span><a href="Modelica_SIunits.html#Modelica.SIunits.Resistance"
>Modelica.SIunits.Resistance</a>;
  <span class="ModelicaKeyword">import </span><a href="Modelica_SIunits.html#Modelica.SIunits.Voltage"
>Modelica.SIunits.Voltage</a>;
  <span class="ModelicaKeyword">import </span><a href="Modelica_SIunits.html#Modelica.SIunits.Current"
>Modelica.SIunits.Current</a>;
  <span class="ModelicaKeyword">type</span> BatteryCapacity = Real (<span class="ModelicaKeyword">final </span>quantity=&quot;Energy&quot;, <span class="ModelicaKeyword">final </span>unit=&quot;A.h&quot;);
  <span class="ModelicaComment">// Parameters (Li-ion values as defaults)</span>
  <span class="ModelicaKeyword">parameter </span><a href="Modelica_SIunits.html#Modelica.SIunits.Resistance"
>Resistance</a> Rint=0.09 <span class="ModelicaComment">&quot;Internal resistance&quot;</span>;
  <span class="ModelicaKeyword">parameter </span><a href="Modelica_SIunits.html#Modelica.SIunits.Voltage"
>Voltage</a> E0=3.7348 <span class="ModelicaComment">&quot;Constant battery voltage&quot;</span>;
  <span class="ModelicaKeyword">parameter </span><a href="Modelica_SIunits.html#Modelica.SIunits.Voltage"
>Voltage</a> K=0.00876 <span class="ModelicaComment">&quot;Polarization voltage&quot;</span>;
  <span class="ModelicaKeyword">parameter </span><a href="PVSystems_Electrical.html#PVSystems.Electrical.SimpleBattery.BatteryCapacity"
>BatteryCapacity</a> Q=1 <span class="ModelicaComment">&quot;Rated battery capacity&quot;</span>;
  <span class="ModelicaKeyword">parameter </span><a href="Modelica_SIunits.html#Modelica.SIunits.Voltage"
>Voltage</a> A=0.468 <span class="ModelicaComment">&quot;Exponential region amplitude&quot;</span>;
  <span class="ModelicaKeyword">parameter </span>Real B=3.5294 <span class="ModelicaComment">&quot;Exponential zone time constant inverse&quot;</span>;
  <span class="ModelicaKeyword">parameter </span><a href="PVSystems_Electrical.html#PVSystems.Electrical.SimpleBattery.BatteryCapacity"
>BatteryCapacity</a> DoDini=0 <span class="ModelicaComment">&quot;Initial Depth of Discharge&quot;</span>;
  <span class="ModelicaComment">// Variables</span>
  <a href="Modelica_SIunits.html#Modelica.SIunits.Voltage"
>Voltage</a> E;
  <a href="PVSystems_Electrical.html#PVSystems.Electrical.SimpleBattery.BatteryCapacity"
>BatteryCapacity</a> it(start=DoDini, fixed=true) <span class="ModelicaComment">&quot;Actual depth of discharge&quot;</span>;
<span class="ModelicaKeyword">equation </span>
  v = E + i*Rint;
  <span class="ModelicaFunction">der</span>(it) = -i/3600;
  E =<span class="ModelicaFunction"> max</span>(0, E0 - K*Q/(Q - it) + A*<span class="ModelicaFunction">exp</span>(-B*it));
<span class="ModelicaKeyword">end </span>SimpleBattery;
</div>
<hr>
<address>
<a href="http://www.3ds.com/">Automatically generated</a> Thu Jul 06 16:37:26 2017.
</address>
</body>
</html>
